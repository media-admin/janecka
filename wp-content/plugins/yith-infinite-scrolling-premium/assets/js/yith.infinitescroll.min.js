!function(S,b,T){"use strict";S.yit_infinitescroll=function(t){var f,h,d=S.extend({nextSelector:"",navSelector:"",itemSelector:"",contentSelector:"",eventType:"scroll",presetLoader:"",customLoader:"",buttonLabel:"",buttonClass:"",loadEffect:"fadeIn"},t),p="undefined"!=typeof yith_infs_script&&yith_infs_script.shop,i="undefined"!=typeof yith_infs_script&&yith_infs_script.block_loader,u=!1,y=!1,e=!1,_=S(d.nextSelector).attr("href"),v=[],g=[],m=function(t,e){b.location.pathname!=t&&(b.history.replaceState({url:""+t},"Title",t),e&&(T.title=e),S(T).trigger("yith_infs_url_changed",[t,e]))};"pagination"!=d.eventType&&S(d.navSelector).hide(),p&&(h=S(d.itemSelector).first().nextUntil(".first",d.itemSelector).length+1);var o,l=function(){e&&S(d.navSelector).last().after('<div class="yith-infs-loader">'+e+"</div>"),u=!0,_=(_=decodeURIComponent(_)).replace(/^(?:\/\/|[^\/]+)*\//,"/"),S.ajax({url:_,dataType:"html",cache:yith_infs_script.use_cache,success:function(t){f=S(d.itemSelector).last();var e,n,i,o=S(t),l=o.find(d.contentSelector),r=o.find(d.itemSelector),s=o.find(d.navSelector),a=o.find(d.nextSelector),c=_,t=b.scrollY;a.length?_=a.attr("href"):(y=!0,S(T).trigger("yith-infs-scroll-finished")),p&&!f.hasClass("last")&&"pagination"!=d.eventType&&(a=r,n=(e=h)-f.prevUntil(".last",d.itemSelector).length,i=0,a.each(function(){var t=S(this);i++,t.removeClass("first"),t.removeClass("last"),(i-n)%e==0?t.addClass("first"):(i-(n-1))%e==0&&t.addClass("last")})),S(d.navSelector).replaceWith(s),"pagination"!=d.eventType?(f.after(r),S(d.navSelector).hide()):(S(d.contentSelector).replaceWith(l),S(b).scrollTop(S(d.contentSelector).offset().top)),S(".yith-infs-loader").remove(),S(T).trigger("yith_infs_adding_elem",[r,c]),r.addClass("yith-infs-animated"),r.addClass(d.loadEffect),yith_infs_script.change_url&&(o=o.filter("title").length?o.filter("title").text():"","pagination"!=d.eventType&&(v.length||v.push([b.location.href,T.title]),v.push([c,o]),g.push(f)),"scroll"!=d.eventType&&m(c,o),"button"===d.eventType&&S("html, body").animate({scrollTop:t},"slow")),setTimeout(function(){u=!1,r.removeClass("yith-infs-animated"),r.removeClass(d.loadEffect),S(T).trigger("yith_infs_added_elem",[r,c])},1e3)}})};"scroll"==d.eventType?(e='<img src="'+(""==d.customLoader?d.presetLoader:d.customLoader)+'">',S(b).on("scroll touchstart",function(){S(this).trigger("yith_infs_start")}),S(b).on("yith_infs_start",function(){var t=S(this),e=S(d.itemSelector).last(),n=null!=yith_infs_script.elem_height?yith_infs_script.elem_height:2*e.height();void 0!==e&&!u&&!y&&t.scrollTop()+t.height()>=e.offset().top-n&&l()})):"button"==d.eventType?(t='<div class="yith-infs-button-wrapper"><button id="yith-infs-button" class="'+d.buttonClass+'">'+d.buttonLabel+"</button></div>",S(d.navSelector).last().after(t),S(T).on("yith-infs-scroll-finished",function(){S(".yith-infs-button-wrapper").remove()}),S("#yith-infs-button").off("click").on("click",function(){var n=S(this);u||(i&&n.block({message:null,overlayCSS:{background:"#fff url("+i+") no-repeat center",opacity:.5,cursor:"none"}}),l()),S(T).on("yith_infs_adding_elem",function(t,e){i&&n.unblock(),yith_infs_script.scroll_top_on_click_load_more&&S("html, body").animate({scrollTop:S(e).first().offset().top-100},1)})})):"pagination"==d.eventType&&S(T).off("click",d.navSelector+" a").on("click",d.navSelector+" a",function(t){t.preventDefault(),_=S(this).attr("href"),i&&S(d.navSelector).block({message:null,overlayCSS:{background:"#fff url("+i+") no-repeat center",opacity:.5,cursor:"none"}}),l()}),S(b).on("scroll touchstart",function(t){var e,n=S(b),i=n.scrollTop()+n.height();void 0!==f&&v.length&&(e=g.indexOf(f),n=f.offset().top+f.height(),i<o?i<=n&&(f=g[e&&e-1],m(v[e][0],v[e][1])):n+250<i&&(e+1<g.length&&(f=g[e+1]),m(v[e+1][0],v[e+1][1])),o=i)})}}(jQuery,window,document);