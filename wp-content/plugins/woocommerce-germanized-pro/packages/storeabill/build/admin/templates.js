!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s="./assets/admin/templates.js")}({"./assets/admin/templates.js":
/*!***********************************!*\
  !*** ./assets/admin/templates.js ***!
  \***********************************/
/*! no static exports found */function(e,t){var a;window.storeabill=window.storeabill||{},window.storeabill.admin=window.storeabill.admin||{},a=jQuery,window.storeabill.admin.templates={params:{},init:function(){var e=storeabill.admin.templates;e.params=storeabill_admin_templates_params,a(document).on("click",".sab-document-templates a.delete",e.onDelete).on("click",".sab-document-templates a.copy",e.onCopy).on("click",".sab-document-templates a.create-first-page",e.onCreateFirstPage).on("click",".sab-document-templates a.sab-add-template",e.onAddTemplate).on("click",".sab-add-editor-template-content a.sab-add-template",e.onAddEditorTemplate).on("click",".sab-add-editor-template-content .sab-editor-template-preview",e.onChangeEditorTemplate).on("change",".sab-document-templates .sab-document-template-default",e.onChangeDefault)},onChangeEditorTemplate:function(){return storeabill.admin.templates,a(this).parents(".sab-editor-template-choose").find(".active").removeClass("active"),a(this).addClass("active"),!1},onAddEditorTemplate:function(){var e=storeabill.admin.templates,t=a(this).parents(".sab-add-editor-template-content").data("document-type"),n=a(this).parents(".sab-add-editor-template-content").find(".sab-editor-template-preview.active").data("template");return e.addTemplate(t,n),!1},addTemplate:function(e,t=""){storeabill.admin.templates.doAjax({action:"create_document_template",template:t,document_type:e}),a("#TB_closeWindowButton").trigger("click")},onAddTemplate:function(){var e=storeabill.admin.templates;return e.addTemplate(e.getDocumentType()),!1},onChangeDefault:function(){var e=storeabill.admin.templates,t=a(this).val();return e.doAjax({action:"update_default_document_template",id:t,document_type:e.getDocumentType()}),!1},getDocumentType:function(){return storeabill.admin.templates.getWrapper().data("document-type")},getTemplateId:function(e){return e.parents(".sab-document-template").data("id")},onDelete:function(){var e=storeabill.admin.templates,t=e.getTemplateId(a(this));return window.confirm(e.params.i18n_delete_template_notice)&&e.doAjax({action:"delete_document_template",id:t}),!1},onCopy:function(){var e=storeabill.admin.templates,t=e.getTemplateId(a(this));return e.doAjax({action:"copy_document_template",id:t}),!1},onCreateFirstPage:function(){var e=storeabill.admin.templates,t=e.getTemplateId(a(this));return e.doAjax({action:"create_document_template_first_page",id:t}),!1},doAjax:function(e){var t=storeabill.admin.templates,n=t.params.ajax_url;t.getWrapper().find(".notice-wrapper").empty(),t.block(),e.hasOwnProperty("security")||(e.security=t.params.edit_templates_nonce),e.action.includes("storeabill_admin_")||(e.action="storeabill_admin_"+e.action),a.ajax({type:"POST",url:n,data:e,success:function(e){e.success?(t.refreshDOM(e.fragments),t.addNotices(e.messages,"success"),t.unblock()):(t.refreshDOM(e.fragments),t.addNotices(e.messages,"error"),t.unblock())},error:function(e){},dataType:"json"})},addNotices:function(e,t){var n=storeabill.admin.templates;a.each(e,(function(e,a){n.addNotice(a,t)}))},addNotice:function(e,t){storeabill.admin.templates.getWrapper().find(".notice-wrapper").append('<div class="notice sab-notice is-dismissible notice-'+t+'"><p>'+e+'</p><button type="button" class="notice-dismiss"></button></div>')},getWrapper:function(){return a(".sab-document-templates")},block:function(){storeabill.admin.templates.getWrapper().block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},unblock:function(){storeabill.admin.templates.getWrapper().unblock()},refreshDOM:function(e){e&&(a.each(e,(function(e,t){a(e).replaceWith(t)})),a(document.body).trigger("sab_init_tooltips"))},onSync:function(){storeabill.admin.table;var e=a(this);return e.hasClass("loading")||(e.find(".spinner").remove(),e.append('<span class="spinner is-active"></span>'),e.addClass("loading"),a(".sab-action-notice-wrapper").length<=0?a(".wp-list-table").before('<div class="sab-action-notice-wrapper"></div>'):a(".sab-action-notice-wrapper").html(""),a.ajax({type:"GET",url:e.attr("href"),dataType:"json",success:function(t){e.find(".spinner").remove(),e.removeClass("loading"),t.success?t.hasOwnProperty("messages")&&a.each(t.messages,(function(e,t){a(".sab-action-notice-wrapper").append('<div class="sab-notice notice is-dismissible updated"><p>'+t+'</p><button type="button" class="notice-dismiss"></button></div>')})):t.hasOwnProperty("messages")&&a.each(t.messages,(function(e,t){a(".sab-action-notice-wrapper").append('<div class="sab-notice notice error is-dismissible updated notice-error"><p>'+t+'</p><button type="button" class="notice-dismiss"></button></div>')})),a(".sab-action-notice-wrapper").find(".notice").length>0&&a(".sab-action-notice-wrapper")[0].scrollIntoView({behavior:"smooth",block:"start"})}}).fail((function(e){window.console.log(e)}))),!1}},a(document).ready((function(){storeabill.admin.templates.init()}))}});