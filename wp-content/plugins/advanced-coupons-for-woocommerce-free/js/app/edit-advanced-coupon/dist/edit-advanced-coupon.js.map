{"version":3,"file":"edit-advanced-coupon.js","mappings":"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","sources":["webpack://edit_advanced_coupon/./src/cart_conditions/templates/condition_field_options.ts","webpack://edit_advanced_coupon/./src/cart_conditions/toggles.ts","webpack://edit_advanced_coupon/./src/helper.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/condition_logic.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/condition_group.ts","webpack://edit_advanced_coupon/./src/cart_conditions/groups.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/logic.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/product_category.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/customer_logged_in_status.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/customer_user_role.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/disallowed_customer_user_role.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/cart_quantity.ts","webpack://edit_advanced_coupon/./src/cart_conditions/fields.ts","webpack://edit_advanced_coupon/./src/cart_conditions/templates/cart_subtotal.ts","webpack://edit_advanced_coupon/./src/cart_conditions/scrapers.ts","webpack://edit_advanced_coupon/./src/cart_conditions/save.ts","webpack://edit_advanced_coupon/./src/cart_conditions/table.ts","webpack://edit_advanced_coupon/./src/cart_conditions/restrictions.ts","webpack://edit_advanced_coupon/./src/cart_conditions/tabs.ts","webpack://edit_advanced_coupon/./src/cart_conditions/index.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/upsell.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/combination_products.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/category_first_column.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/placeholder_row.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/product_categories.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/product_first_column.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/specific_products.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/any_products.ts","webpack://edit_advanced_coupon/./src/bogo_deals/toggles.ts","webpack://edit_advanced_coupon/./src/bogo_deals/save.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/add_edit_row.ts","webpack://edit_advanced_coupon/./src/bogo_deals/templates/table_row.ts","webpack://edit_advanced_coupon/./src/bogo_deals/table.ts","webpack://edit_advanced_coupon/./src/bogo_deals/index.ts","webpack://edit_advanced_coupon/./src/toggle_fields.ts","webpack://edit_advanced_coupon/./src/upsell.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/links_list_template.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/search_widget_template.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/modal_template.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/permission_template.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/placeholder_template.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/video_gallery_template.ts","webpack://edit_advanced_coupon/./src/help_modal/videos.ts","webpack://edit_advanced_coupon/./src/help_modal/modal.ts","webpack://edit_advanced_coupon/./src/help_modal/templates/error_template.ts","webpack://edit_advanced_coupon/./src/help_modal/search.ts","webpack://edit_advanced_coupon/./src/help_modal/permission.ts","webpack://edit_advanced_coupon/./src/help_modal/index.ts","webpack://edit_advanced_coupon/./src/index.ts"],"sourcesContent":["declare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\ninterface IFieldGroup {\n  group: string;\n  label: string;\n}\n\ninterface IConditionFieldOption {\n  key: string;\n  group: string;\n  title: string;\n}\n\nexport default function conditionFieldOptionsTemplate() {\n  const {\n    cart_condition_fields,\n    cart_condition_field_groups: fieldGroups,\n    product_table_buttons: btnLabels,\n    add_new_and_rule,\n  } = acfw_edit_coupon;\n\n  const conditionFields = Object.keys(cart_condition_fields).map(\n    (key) => cart_condition_fields[key]\n  );\n\n  return `\n    <div class=\"condition-group-actions\">\n      <div class=\"add-condition-form\" style=\"display: none;\">\n        <select class=\"condition-types\" data-placeholder=\"Search/select condition fields\">\n          <option value=\"\">Search</option>\n          ${fieldGroups\n            .map((f: IFieldGroup) =>\n              conditionFieldGroupTemplate(f, conditionFields)\n            )\n            .join(\"\")}\n        </select>\n        <button type=\"button\" class=\"add-condition-field button-primary\">${\n          btnLabels.add\n        }</button>\n        <button type=\"button\" class=\"cancel-add-condition-field button\">${\n          btnLabels.cancel\n        }</button>\n      </div>\n      <button type=\"button\" class=\"add-condition-trigger button\">\n        <i class=\"dashicons dashicons-plus\"></i>\n        ${add_new_and_rule}\n      </button>\n    </div>\n  `;\n}\n\nfunction conditionFieldGroupTemplate(\n  fieldGroup: IFieldGroup,\n  conditionFields: IConditionFieldOption[]\n) {\n  const { group, label } = fieldGroup;\n  const matchedFields = conditionFields.filter(\n    (c: IConditionFieldOption) =>\n      c.group === group || (group === \"others\" && c.group === undefined)\n  );\n\n  if (!matchedFields.length) return;\n\n  return `\n    <optgroup label=\"${label}\">\n      ${matchedFields\n        .map((c) => `<option value=\"${c.key}\">${c.title}</option>`)\n        .join(\"\")}\n    </optgroup>\n  `;\n}\n\nexport function enhanceConditionFieldSelector() {\n  jQuery(\"select.condition-types\").select2();\n}\n","import { enhanceConditionFieldSelector } from \"./templates/condition_field_options\";\n\ndeclare var jQuery: any;\nconst $ = jQuery;\nconst module_block: HTMLElement = document.querySelector(\n  \"#acfw_cart_conditions\"\n);\n\n/**\n * Toggle add condition form.\n *\n * @since 1.0.0\n */\nexport function toggle_add_condition_form(): void {\n  const $button: JQuery = $(this),\n    $condition_actions: JQuery = $button.closest(\"div.condition-group-actions\");\n\n  if ($button.hasClass(\"add-condition-trigger\")) {\n    $condition_actions.find(\".add-condition-form\").show();\n    enhanceConditionFieldSelector();\n    $button.hide();\n  } else {\n    $condition_actions.find(\".add-condition-form\").hide();\n    $condition_actions.find(\".add-condition-trigger\").show();\n  }\n}\n\n/**\n * Toggle editing mode.\n *\n * @since 1.0.0\n */\nexport function toggle_editing_mode(toggle: boolean): void {\n  $(module_block).data(\"editing\", toggle);\n  $(module_block).find(\"#save-cart-conditions\").prop(\"disabled\", !toggle);\n}\n\n/**\n * Populate custom taxonomy options.\n *\n * @since 1.4\n */\nexport function popuplate_taxonomy_term_options() {\n  const $taxonomy: JQuery = $(this),\n    $condition_block: JQuery = $taxonomy.closest(\".condition-field\"),\n    $tax_terms: JQuery = $condition_block.find(\"select.condition-value\"),\n    taxonomy: string = $taxonomy.val() + \"\",\n    terms: any[] = $condition_block.data(\"selected_terms\"),\n    tax_options: any[] = $(module_block).data(\"custom_tax_options\"),\n    taxonomy_data: any[] = tax_options.filter((t) => t.slug == taxonomy),\n    taxonomy_terms: any[] = taxonomy_data.length ? taxonomy_data[0].terms : [];\n\n  $tax_terms.val(null).find(\"option\").remove();\n\n  if (!taxonomy_terms.length) return;\n\n  for (let term of taxonomy_terms) {\n    let { name, term_id } = term;\n    let optionObj: HTMLOptionElement = new Option(name, term_id);\n    $tax_terms.append(optionObj);\n  }\n\n  $tax_terms.val(terms).trigger(\"change\");\n}\n\n/**\n * Populate shipping zone region options.\n *\n * @since 1.4\n */\nexport function popuplate_shipping_region_options() {\n  const $shipping_zone: JQuery = $(this),\n    $condition_block: JQuery = $shipping_zone.closest(\".condition-field\"),\n    $shipping_region: JQuery = $condition_block.find(\"select.condition-value\"),\n    zone_id: string = $shipping_zone.val() + \"\";\n\n  if (!zone_id) return;\n\n  const regions: any = $condition_block.data(\"regions\"),\n    region_labels: any = $(module_block).data(\"shipping_regions\"),\n    region_options: any = $condition_block.data(\"zones\")[zone_id][\"regions\"];\n\n  $shipping_region.val(null).find(\"option\").remove();\n\n  if (typeof region_options != \"object\" || !region_options.length) return;\n\n  for (let code of region_options) {\n    const optionObj: HTMLOptionElement = new Option(region_labels[code], code);\n    $shipping_region.append(optionObj);\n  }\n\n  $shipping_region.val(regions).trigger(\"change\");\n}\n","declare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Toggle overlay block.\n *\n * @since 1.0.0\n *\n * @param object overlay Overlay html element.\n * @param string type    Toggle type (show/hide).\n */\nexport function toggle_overlay(overlay: HTMLElement, type: string = \"\"): void {\n  if (!type) type = \"show\";\n\n  let display = type === \"show\" ? \"block\" : \"none\";\n  jQuery(overlay).css(\"display\", display);\n}\n\n/**\n * Escape string to be used on an attribute.\n *\n * @since 1.0.0\n * @param string text String to escape.\n */\nexport function esc_attr(text: string): string {\n  const map: any = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#039\",\n  };\n\n  return text.replace(/[&<>\"']/g, (m) => map[m]);\n}\n\n/**\n * Remove leading zeros from an input field.\n *\n * @since 1.2\n */\nexport function remove_leading_zeros() {\n  const { decimal_separator } = acfw_edit_coupon;\n\n  const $input: JQuery = jQuery(this);\n  let value: string = $input.val() + \"\";\n\n  if (value == \"0\" + decimal_separator) $input.val(\"0\");\n  if (value == \"0\" || value.substring(0, 2) == \"0\" + decimal_separator) return;\n\n  value = value.replace(/^0+/, \"\");\n  value = value.substring(0, 1) == decimal_separator ? \"0\" + value : value;\n\n  $input.val(value);\n}\n\n/**\n * Array to select options markup.\n *\n * @param options\n * @param value\n * @param key\n * @param label\n */\nexport function array_to_select_options(\n  options: any,\n  value: string,\n  key: string = \"value\",\n  label: string = \"label\"\n): string {\n  return options\n    .map(\n      (option: any) =>\n        `<option value=\"${option[key]}\" ${\n          option[key] == value ? \"selected\" : \"\"\n        }>${option[label]}</option>`\n    )\n    .toString()\n    .replace(/>,</g, \"><\");\n}\n\n/**\n * Get allowed minimum value.\n *\n * @since 1.0.0\n * @since 1.2   Remove unused property.\n *\n * @param {string} condition\n */\nexport function get_allowed_minimum_value(condition: string): number {\n  return condition == \"<\" ? 1 : 0;\n}\n\n/**\n * Compare option values to mark option as selected.\n *\n * @param value_1\n * @param value_2\n */\nexport function selected(value_1: string, value_2: string) {\n  return value_1 == value_2 ? \"selected\" : \"\";\n}\n\nexport function selected_multiple(array: any[], value: string) {\n  return array.indexOf(value) >= 0 ? \"selected\" : \"\";\n}\n\n/**\n * Get discount type select options markup.\n *\n * @since 1.15\n *\n * @param value\n */\nexport function discount_type_options(\n  value: string = \"\",\n  show_nodiscount: boolean = false\n): string {\n  const { nodiscount, override, percent, fixed } =\n    acfw_edit_coupon.discount_field_options;\n  const nodiscount_markup = `<option value=\"nodiscount\" ${selected(\n    value,\n    \"nodiscount\"\n  )}>= : ${nodiscount}</option>`;\n\n  return `\n        ${show_nodiscount ? nodiscount_markup : \"\"}\n        <option value=\"override\" ${selected(\n          value,\n          \"override\"\n        )}>$ : ${override}</option>\n        <option value=\"percent\" ${selected(\n          value,\n          \"percent\"\n        )}>% : ${percent}</option>\n        <option value=\"fixed\" ${selected(value, \"fixed\")}>-$ : ${fixed}</option>\n    `;\n}\n\n/**\n * Get condition options markup.\n *\n * @sinc 1.15\n * @param condition\n */\nexport function condition_options(condition: string = \"\"): string {\n  const { exactly, anyexcept, morethan, lessthan } =\n    acfw_edit_coupon.condition_field_options;\n\n  return `\n        <option value=\"=\" ${selected(condition, \"=\")}>${exactly}</option>\n        <option value=\"!=\" ${selected(condition, \"!=\")}>${anyexcept}</option>\n        <option value=\">\" ${selected(condition, \">\")}>${morethan}</option>\n        <option value=\"<\" ${selected(condition, \"<\")}>${lessthan}</option>\n    `;\n}\n\n/**\n * Validate url.\n *\n * @since 1.15\n */\nexport function validate_url(url: string): boolean {\n  const pattern =\n    /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n\n  return pattern.test(url);\n}\n\n/**\n * Format price string to float.\n *\n * @since 1.3.3\n */\nexport function price_to_float(price: string): number {\n  const { decimal_separator } = acfw_edit_coupon;\n  return parseFloat(price.replace(decimal_separator, \".\"));\n}\n\n/**\n * Validate discount value by type.\n * Make sure that percent and fixed type discounts is not valid when value is not greater than 0.\n *\n * @param type\n * @param value\n * @returns\n */\nexport function validateDiscount(type: string, value: string): boolean {\n  if (\"percent\" === type || \"fixed\" === type) {\n    return 0 < price_to_float(value);\n  }\n\n  return true;\n}\n","import { selected } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Return logic template markup.\n * \n * @since 1.15\n */\nexport default function condition_logic_template( value: string = \"\" ): string {\n\n    const { logic_field_options } = acfw_edit_coupon;\n    const { and , or } = logic_field_options;\n    \n    return `\n        <div class=\"condition-group-logic\">\n            <div class=\"field-control\">\n                <select class=\"cgroup-logic\">\n                    <option value=\"and\" ${ selected( value , \"and\" ) }>${ and }</option>\n                    <option value=\"or\" ${ selected( value , \"or\" ) }>${ or }</option>\n                </select>\n            </div>\n        </div>\n    `;\n}","import conditionFieldOptionsTemplate from \"./condition_field_options\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Return condition group template markup.\n *\n * @since 1.15\n */\nexport default function condition_group_template(\n  fields_markup: string = \"\"\n): string {\n  const { empty_cart_conditions_field } = acfw_edit_coupon;\n  const cgroup_actions: string = conditionFieldOptionsTemplate();\n  const empty_conditions_markup: string = `<div class=\"empty-conditions\">${empty_cart_conditions_field}</div>`;\n\n  return `\n        <div class=\"condition-group ${!fields_markup ? \"new\" : \"\"}\">\n            <a class=\"remove-condition-group\" href=\"javascript:void(0);\">\n                <i class=\"dashicons dashicons-trash\"></i>\n            </a>\n            <div class=\"condition-group-fields\">\n                ${fields_markup ? fields_markup : empty_conditions_markup}\n            </div>\n            ${cgroup_actions}\n        </div>\n    `;\n}\n","import { toggle_editing_mode } from \"./toggles\";\nimport condition_logic_template from \"./templates/condition_logic\";\nimport condition_group_template from \"./templates/condition_group\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\nvar $: any = jQuery;\n\n/**\n * Add condition group callback.\n *\n * @since 1.0.0\n */\nexport function add_condition_group() {\n  const condition_groups: HTMLElement = document.querySelector(\n    \"#acfw_cart_conditions .condition-data-wrap .condition-groups\"\n  );\n\n  if ($(condition_groups).find(\".condition-group\").length)\n    $(condition_groups).append(condition_logic_template(\"or\"));\n\n  $(condition_groups).find(\".no-condition-group\").remove();\n  $(condition_groups).append(condition_group_template());\n\n  $(this).blur();\n  $(condition_groups)\n    .find(\".condition-group.new .add-condition-trigger\")\n    .trigger(\"click\");\n  $(condition_groups).find(\".condition-group\").removeClass(\"new\");\n\n  toggle_editing_mode(true);\n}\n\n/**\n * Remove condition group callback.\n *\n * @since 1.0.0\n */\nexport function remove_condition_group() {\n  const $button: JQuery = $(this),\n    module_block: HTMLElement = document.querySelector(\"#acfw_cart_conditions\"),\n    $condition_group: JQuery = $button.closest(\".condition-group\"),\n    $cgroup_logic: JQuery =\n      $condition_group.index() == 0\n        ? $condition_group.next(\".condition-group-logic\")\n        : $condition_group.prev(\".condition-group-logic\");\n\n  const { no_condition_group_msg } = acfw_edit_coupon;\n\n  $condition_group.remove();\n  $cgroup_logic.remove();\n\n  if ($(module_block).find(\".condition-group\").length < 1) {\n    $(module_block).find(\".condition-groups\").append(`\n            <div class=\"no-condition-group\">\n                ${no_condition_group_msg}\n            </div>\n        `);\n  }\n\n  toggle_editing_mode(true);\n}\n","import { selected } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Return logic template markup.\n * \n * @since 1.15 \n * \n * @param data \n */\nexport default function logic_template( value: string = \"\" ): string {\n\n    const { logic_field_options } = acfw_edit_coupon;\n    const { and , or } = logic_field_options;\n\n    return `<div class=\"logic-condition-field condition-field\" data-type=\"logic\">\n        <div class=\"field-control\">\n            <select class=\"condition-logic\">\n                <option value=\"and\" ${ selected( value , \"and\" ) }>${ and }</option>\n                <option value=\"or\" ${ selected( value , \"or\" ) }>${ or }</option>\n            </select>\n        </div>\n    </div>`;\n}","import { selected_multiple } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\nconst { cart_condition_fields , condition_field_options } = acfw_edit_coupon;\n\n/**\n * Return product category condition field template markup.\n * \n * @since 1.15 \n * \n * @param data \n */\nexport default function product_category_template( data: any ): string {\n\n    const { value: categories , condition , quantity } = data;\n    const { title, placeholder, field } = cart_condition_fields.product_category;\n    const { field: quantityLabel } = cart_condition_fields.cart_quantity;\n    const { condition_label } = acfw_edit_coupon;\n    const { exactly, anyexcept, morethan, lessthan } = condition_field_options;\n\n    const condOption = condition ? condition : \">\";\n\n    return `\n    <div class=\"product-category-field condition-field\" data-type=\"product-category\">\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\n        <h3 class=\"condition-field-title\">${ title }</h3>\n        <div class=\"field-control categories\">\n            <label>${ field }</label>\n            <select class=\"condition-value wc-enhanced-select\" multiple data-placeholder=\"${ placeholder }\">\n                ${ category_options( categories ) }\n            </select>\n        </div>\n        <div class=\"field-control condition\">\n            <label>${ condition_label }</label>\n            <select class=\"condition-select\">\n                <option value=\"=\" ${ condOption == \"=\" ? \"selected\" : \"\" }>${ exactly }</option>\n                <option value=\"!=\" ${ condOption == \"!=\" ? \"selected\" : \"\" }>${ anyexcept }</option>\n                <option value=\">\" ${ condOption == \">\" ? \"selected\" : \"\" }>${ morethan }</option>\n                <option value=\"<\" ${ condOption == \"<\" ? \"selected\" : \"\" }>${ lessthan }</option>\n            </select>\n        </div>\n        <div class=\"field-control quantity\">\n            <label>${ quantityLabel }</label>\n            <input type=\"number\" class=\"condition-quantity\" value=\"${ typeof quantity ? quantity : 0 }\" min=\"${ condition == \"<\" ? 1 : 0 }\">\n        </div>\n    </div>\n    `;\n}\n\n/**\n * Get category options markup.\n * \n * @since 1.15\n * \n * @param data \n */\nfunction category_options( data: number[] = [] ): string {\n\n    const { options } = cart_condition_fields.product_category;\n    let markup: string = '';\n\n    for ( let x in options ) {\n        markup += `<option value=\"${ x }\" ${ selected_multiple( data , x ) }>${ options[x] }</option>`\n    }\n        \n    return markup;\n}","import { selected } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\nconst { cart_condition_fields } = acfw_edit_coupon;\n\n/**\n * Return customer logged in status condition field template markup.\n * \n * @since 1.15 \n * \n * @param data \n */\nexport default function customer_logged_in_status_template( data:string ): string {\n\n    const { title } = cart_condition_fields.customer_logged_in_status;\n\n    return `\n        <div class=\"customer-logged-in-status-field condition-field\" data-type=\"customer-logged-in-status\">\n\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\n\n        <h3 class=\"condition-field-title\">${ title }</h3>\n\n        <div class=\"field-control\">\n            <select class=\"condition-value\">\n                ${ get_options( data ) }\n            </select>\n        </div>\n    </div>`;\n}\n\n/**\n * Get condition field options.\n * \n * @since 1.15 \n * \n * @param data \n */\nfunction get_options( data: string ): string {\n\n    const { options } = cart_condition_fields.customer_logged_in_status;\n    let markup = '';\n\n    for ( let x in options ) {\n        markup += `<option value=\"${ x }\" ${ selected( x , data ) }>${ options[ x ] }</option>`;\n    }\n\n    return markup;\n}","import { selected_multiple } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\nconst { cart_condition_fields } = acfw_edit_coupon;\n\n/**\n * Return customer user role condition field template markup.\n * \n * @since 1.15 \n * \n * @param data \n */\nexport default function customer_user_role_template( data: string[] ): string {\n\n    const { title , placeholder } = cart_condition_fields.customer_user_role;\n\n    return `\n        <div class=\"customer-user-role-field condition-field\" data-type=\"customer-user-role\">\n            <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\n            <h3 class=\"condition-field-title\">${ title }</h3>\n            <div class=\"field-control\">\n                <select class=\"wc-enhanced-select condition-value\" multiple data-placeholder=\"${ placeholder }\">\n                    ${ get_options( data ) }\n                </select>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Get condition field options markup.\n * \n * @since 1.15\n * \n * @param data \n */\nfunction get_options( data: string[] ) {\n\n    const { user_role_options } = acfw_edit_coupon;\n    let markup = '';\n    \n    for ( let x in user_role_options )\n        markup += `<option value=\"${ x }\" ${ selected_multiple( data , x ) }>${ user_role_options[x] }</option>`;\n\n    return markup;\n}","import { selected_multiple } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\nconst { cart_condition_fields } = acfw_edit_coupon;\n\n/**\n * Return disallowed customer user role condition field template markup.\n * \n * @since 1.15 \n * \n * @param data \n */\nexport default function disallowed_customer_user_role_template( data: string[] ): string {\n\n    const { title , placeholder } = cart_condition_fields.disallowed_customer_user_role;\n\n    return `\n        <div class=\"disallowed-customer-user-role-field condition-field\" data-type=\"disallowed-customer-user-role\">\n            <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\n            <h3 class=\"condition-field-title\">${ title }</h3>\n            <div class=\"field-control\">\n                <select class=\"wc-enhanced-select condition-value\" multiple data-placeholder=\"${ placeholder }\">\n                    ${ get_options( data ) }\n                </select>\n            </div>\n        </div>\n    `;\n}\n\n/**\n * Get condition field options markup.\n * \n * @since 1.15\n * \n * @param data\n */\nfunction get_options( data: string[] ) {\n\n    const { user_role_options } = acfw_edit_coupon;\n    let markup = '';\n    \n    for ( let x in user_role_options )\n        markup += `<option value=\"${ x }\" ${ selected_multiple( data , x ) }>${ user_role_options[x] }</option>`;\n\n    return markup;\n}","import { condition_options } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\nconst { cart_condition_fields } = acfw_edit_coupon;\n\n/**\n * Return cart quantity condition field template markup.\n * \n * @since 1.15 \n * \n * @param data \n */\nexport default function cart_quantity_template( data: any ): string {\n\n    const { condition , value } = data;\n    const { title, desc, field } = cart_condition_fields.cart_quantity;\n    const { condition_label } = acfw_edit_coupon;\n\n    return `\n    <div class=\"cart-quantity-field condition-field\" data-type=\"cart-quantity\">\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\n        <h3 class=\"condition-field-title\">${ title }</h3>\n        <label>${ desc }</label>\n        <div class=\"field-control\">\n            <label>${ condition_label }</label>\n            <select class=\"condition-select\">\n                ${ condition_options( condition ) }\n            </select>\n        </div>\n        <div class=\"field-control\">\n            <label>${ field }</label>\n            <input class=\"condition-value\" type=\"number\" min=\"0\" value=\"${ value >= 0 ? value : \"\" }\">\n        </div>\n    </div>\n    `;\n}","import { toggle_overlay } from \"../helper\";\nimport { toggle_editing_mode } from \"./toggles\";\n\n// templates\nimport logic_template from \"./templates/logic\";\nimport product_category_template from \"./templates/product_category\";\nimport customer_logged_in_status_template from \"./templates/customer_logged_in_status\";\nimport customer_user_role_template from \"./templates/customer_user_role\";\nimport disallowed_customer_user_role_template from \"./templates/disallowed_customer_user_role\";\nimport cart_quantity_template from \"./templates/cart_quantity\";\nimport cart_subtotal_template from \"./templates/cart_subtotal\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nconst {\n  cart_condition_fields,\n  premium_cart_condition_fields,\n  upsell,\n} = acfw_edit_coupon;\n\n/**\n * Add condition field.\n *\n * @since 1.0.0\n */\nexport function add_condition_field(): void {\n  const $button: JQuery = $(this),\n    $condition_type: JQuery = $button\n      .closest(\".condition-group-actions\")\n      .find(\"select.condition-types\"),\n    $condition_group: JQuery = $button.closest(\".condition-group\"),\n    $condition_fields: JQuery = $condition_group.find(\n      \".condition-group-fields\"\n    ),\n    overlay: HTMLElement = document.querySelector(\n      \"#acfw_cart_conditions .acfw-overlay\"\n    );\n\n  const condition_type: string = $condition_type.val() + \"\";\n  const fields_count: number = $condition_fields.find(\n    \".condition-field,.condition-set\"\n  ).length;\n\n  toggle_overlay(overlay, \"show\");\n\n  if (\n    premium_cart_condition_fields &&\n    premium_cart_condition_fields.indexOf(condition_type) > -1\n  ) {\n    // upsell\n    vex.dialog.alert({ unsafeMessage: upsell.cart_condition_field });\n  } else {\n    const condition_field_markup: string = get_condition_field(\n      condition_type,\n      null,\n      fields_count\n    );\n\n    if (condition_field_markup) {\n      $condition_fields.find(\".empty-conditions\").remove();\n      $condition_fields.show().append(condition_field_markup);\n      $condition_fields\n        .find(`.${condition_type}-field`)\n        .find(\"input,select\")\n        .trigger(\"change\");\n      $(\"body\").trigger(\"wc-enhanced-select-init\");\n\n      toggle_editing_mode(true);\n    } else vex.dialog.alert(acfw_edit_coupon.fail_add_condition_field);\n  }\n\n  toggle_overlay(overlay, \"hide\");\n\n  $condition_group.find(\".condition-group-actions .add-condition-form\").hide();\n  $condition_group\n    .find(\".condition-group-actions .add-condition-trigger\")\n    .show();\n}\n\n/**\n * Remove condition field.\n *\n * @since 1.0.0\n */\nexport function remove_condition_field(): void {\n  const $button: JQuery = $(this),\n    $condition_field: JQuery = $button.closest(\n      \".condition-field,.condition-set\"\n    ),\n    $condition_group: JQuery = $condition_field.closest(\".condition-group\"),\n    $cfield_logic: JQuery =\n      $condition_field.index() == 0\n        ? $condition_field.next(\".logic-condition-field\")\n        : $condition_field.prev(\".logic-condition-field\");\n\n  const { empty_cart_conditions_field } = acfw_edit_coupon;\n\n  $condition_field.remove();\n  $cfield_logic.remove();\n\n  if ($condition_group.find(\".condition-field,.condition-set\").length < 1) {\n    $condition_group.find(\".condition-group-fields\").append(`\n            <div class=\"empty-conditions\">\n                ${empty_cart_conditions_field}\n            </div>\n        `);\n  }\n\n  toggle_editing_mode(true);\n}\n\n/**\n * Get condition field markup.\n *\n * @param condition_type string\n * @param fields_count number\n * @return string\n */\nexport function get_condition_field(\n  condition_type: string,\n  data: any = null,\n  fields_count: number = 0\n): string {\n  let markup: string = \"\";\n  switch (condition_type) {\n    case \"product-category\":\n      data = data ? data : {};\n\n      // if data is an array (old format) then we build\n      if (data.length) data = { condition: \">\", value: data, quantity: 0 };\n\n      markup += product_category_template(data);\n      break;\n\n    case \"customer-logged-in-status\":\n      markup += customer_logged_in_status_template(data);\n      break;\n\n    case \"customer-user-role\":\n      data = data ? data : [];\n      markup += customer_user_role_template(data);\n      break;\n\n    case \"disallowed-customer-user-role\":\n      data = data ? data : [];\n      markup += disallowed_customer_user_role_template(data);\n      break;\n\n    case \"cart-quantity\":\n      data = data ? data : {};\n      markup += cart_quantity_template(data);\n      break;\n\n    case \"cart-subtotal\":\n      data = data ? data : {};\n      markup += cart_subtotal_template(data);\n      break;\n\n    default:\n      const field_key: string = condition_type.replace(/-/g, \"_\");\n      if (cart_condition_fields[field_key]) {\n        const { template_callback, default_data_value } = cart_condition_fields[\n          field_key\n        ];\n        if (default_data_value) data = data ? data : default_data_value;\n\n        if (template_callback) markup += template_callback(data, field_key);\n      }\n      break;\n  }\n\n  return markup && fields_count ? logic_template() + markup : markup;\n}\n\n/**\n * Check if condition field type is supported.\n *\n * @param type string\n */\nexport function is_condition_field(type: string) {\n  return acfw_edit_coupon.cart_conditon_field_options.indexOf(type) > -1;\n}\n","import { condition_options } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Return cart subtotal condition field template markup.\n *\n * @since 1.15\n *\n * @param data\n */\nexport default function cart_subtotal_template(data: any): string {\n  const { condition, value } = data;\n  const { cart_condition_fields, condition_label } = acfw_edit_coupon;\n  const { title, desc, field } = cart_condition_fields.cart_subtotal;\n\n  return `\n    <div class=\"cart-subtotal-field condition-field\" data-type=\"cart-subtotal\">\n        <a class=\"remove-condition-field\" href=\"javascript:void(0);\"><i class=\"dashicons dashicons-trash\"></i></a>\n        <h3 class=\"condition-field-title\">${title}</h3>\n        <label>${desc}</label>\n        <div class=\"field-control\">\n            <label>${condition_label}</label>\n            <select class=\"condition-select\">\n                ${condition_options(condition)}\n            </select>\n        </div>\n        <div class=\"field-control\">\n            <label>${field}</label>\n            <input class=\"condition-value wc_input_price\" type=\"text\" value=\"${\n              value ? value : \"\"\n            }\">\n        </div>\n    </div>\n    `;\n}\n","declare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $: any = jQuery;\nconst { cart_condition_fields } = acfw_edit_coupon;\n\n/**\n * Scrape condition group data.\n *\n * @since 1.0.0\n */\nexport function scrape_condition_group_data(condition_group: Element): any {\n  const condition_fields: NodeList = condition_group.querySelectorAll(\n    \".condition-set,.condition-field\"\n  );\n  let fields: any[] = [];\n\n  if (condition_group.classList.contains(\"condition-group-logic\"))\n    return {\n      type: \"group_logic\",\n      value: condition_group.querySelector(\"select\").value,\n    };\n\n  condition_fields.forEach((condition_field: HTMLElement) =>\n    fields.push(scrape_condition_field_data(condition_field))\n  );\n\n  return fields.length ? { type: \"group\", fields: fields } : null;\n}\n\n/**\n * Scrape condition field data.\n *\n * @since 1.0.0\n */\nexport function scrape_condition_field_data(condition_field: HTMLElement): any {\n  const { type } = condition_field.dataset;\n  let field_data: any = { type: type, data: null };\n  let temp: any, temp2: any, temp3: any, temp4: any;\n\n  switch (type) {\n    case \"logic\":\n      temp = condition_field.querySelector(\"select.condition-logic\");\n      field_data.data = temp.value;\n      break;\n\n    case \"product-category\":\n      temp = condition_field.querySelector(\".condition-value\");\n      temp2 = condition_field.querySelector(\".condition-select\");\n      temp3 = condition_field.querySelector(\".condition-quantity\");\n      field_data.data = {\n        condition: $(temp2).val(),\n        value: $(temp).val(),\n        quantity: $(temp3).val(),\n      };\n      break;\n\n    case \"customer-logged-in-status\":\n    case \"customer-user-role\":\n    case \"disallowed-customer-user-role\":\n      temp = condition_field.querySelector(\".condition-value\");\n      field_data.data = $(temp).val();\n      break;\n\n    case \"cart-quantity\":\n    case \"cart-subtotal\":\n      temp = condition_field.querySelector(\".condition-select\");\n      temp2 = condition_field.querySelector(\".condition-value\");\n      field_data.data = {\n        condition: $(temp).val(),\n        value:\n          type == \"cart-subtotal\" ? $(temp2).val() : parseInt($(temp2).val()),\n      };\n      break;\n\n    default:\n      const field_key: string = type.replace(/-/g, \"_\");\n      if (cart_condition_fields[field_key]) {\n        const { scraper_callback } = cart_condition_fields[field_key];\n\n        field_data.data = scraper_callback(condition_field);\n      }\n      break;\n  }\n\n  return field_data;\n}\n","import {\n  get_allowed_minimum_value,\n  toggle_overlay,\n  validate_url,\n} from \"../helper\";\nimport { toggle_editing_mode } from \"./toggles\";\nimport { scrape_condition_group_data } from \"./scrapers\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var ajaxurl: string;\ndeclare var woocommerce_admin_meta_boxes: any;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nconst { post_id } = woocommerce_admin_meta_boxes;\n\n/**\n * Save cart conditions.\n *\n * @since 1.0.0\n */\nexport function save_cart_conditions() {\n  const module_block: HTMLElement = document.querySelector(\n      \"#acfw_cart_conditions\"\n    ),\n    condition_groups: NodeList = module_block.querySelectorAll(\n      \".condition-groups .condition-group, .condition-groups .condition-group-logic\"\n    ),\n    overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\");\n\n  const { post_status } = acfw_edit_coupon;\n  const { post_id } = woocommerce_admin_meta_boxes;\n\n  let form_data: any[] = [];\n\n  // remove product table edit form rows.\n  $(module_block)\n    .find(\".acfw-styled-table tr.add-edit-form button.cancel\")\n    .trigger(\"click\");\n\n  condition_groups.forEach((condition_group: HTMLElement) => {\n    const data = scrape_condition_group_data(condition_group);\n    if (data) form_data.push(data);\n  });\n\n  if (!validate_form_data(form_data)) {\n    vex.dialog.alert(acfw_edit_coupon.cart_conditions_invalid);\n\n    // Add save error flag class in #acfw_cart_conditions\n    $(module_block).addClass(\"save-error\");\n    return;\n  }\n\n  const notice_settings = {\n    message: $(module_block)\n      .find(\".text-input.non-qualifying-message-field\")\n      .val(),\n    btn_text: $(module_block)\n      .find(\".text-input.non-qualifying-btn-text-field\")\n      .val(),\n    btn_url: $(module_block)\n      .find(\".text-input.non-qualifying-btn-url-field\")\n      .val(),\n  };\n  const auto_apply_display = $(module_block)\n    .find(\".display-notice-auto-apply-field\")\n    .is(\":checked\")\n    ? \"yes\"\n    : \"\";\n\n  if (notice_settings.btn_url && !validate_url(notice_settings.btn_url)) {\n    vex.dialog.alert(acfw_edit_coupon.cart_notice_url_invalid);\n    $(module_block).addClass(\"save-error\");\n    return;\n  }\n\n  toggle_overlay(overlay, \"show\");\n\n  ajax_save(\n    {\n      cart_conditions: form_data,\n      notice_settings: notice_settings,\n      auto_apply_display: auto_apply_display,\n    },\n    (response: any) => {\n      if (response.status == \"success\") {\n        // if coupon is not published yet, then save it as draft.\n        if (post_status !== \"publish\") {\n          if (!$(\"input[name='post_title']\").val())\n            $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\n\n          $(\"select[name='post_status']\")\n            .append(new Option(\"Published\", \"publish\"))\n            .val(\"publish\");\n\n          $(\"#publishing-action\").append(`\n                    <input type=\"hidden\" name=\"publish\" value=\"Publish\">\n                `);\n          $(\"input#publish\").click();\n        }\n      } else {\n        if (response.error_msg) vex.dialog.alert(response.error_msg);\n      }\n\n      toggle_editing_mode(false);\n      $(module_block).find(\"#save-cart-conditions\").prop(\"disabled\", true);\n      toggle_overlay(overlay, \"hide\");\n    }\n  );\n}\n\n/**\n * Save on coupon publish.\n *\n * @since 1.0.0\n */\nexport function save_on_coupon_publish(e: any) {\n  const module_block: HTMLElement = document.querySelector(\n    \"#acfw_cart_conditions\"\n  );\n\n  if (!$(module_block).data(\"editing\")) return;\n\n  e.preventDefault();\n  $(module_block).find(\"#save-cart-conditions\").trigger(\"click\");\n\n  // delay for 1 second to give time for\n  setTimeout(() => {\n    // If Cart Condition displays an error message then don't save the coupon\n    if ($(module_block).hasClass(\"save-error\"))\n      $(module_block).removeClass(\"save-error\");\n    else $(\"form#post\").submit();\n  }, 1000);\n}\n\n/**\n * Trigger AJAX save.\n *\n * @since 1.0.0\n *\n * @param form_data\n * @param callback\n * @return jQuery AJAX\n */\nfunction ajax_save(data: any, callback: CallableFunction) {\n  data.action = \"acfw_save_cart_conditions\";\n  data.coupon_id = post_id;\n\n  return $.post(ajaxurl, data, callback, \"json\");\n}\n\n/**\n * Validate cart conditions form data.\n *\n * @since 1.0.0\n */\nfunction validate_form_data(form_data: any[]): boolean {\n  let group, field, data, type, objects, condition, value, min;\n\n  // return true if form data has a single empty group (initial layout).\n  if (form_data.length === 1 && form_data[0].fields?.length < 1) return true;\n\n  let prevGroupType = \"\";\n\n  for (group of form_data) {\n    if (group[\"type\"] === \"group_logic\") {\n      // invalidate if the previous group of the logic is still a logic or non-existent.\n      if (!prevGroupType || prevGroupType === \"group_logic\") {\n        return false;\n      }\n\n      prevGroupType = \"group_logic\";\n\n      // skip validation for group logic fields.\n      continue;\n    }\n\n    prevGroupType = group[\"type\"];\n\n    // invalidate if no fields detected.\n    if (group[\"fields\"] === undefined || group[\"fields\"].length < 1)\n      return false;\n\n    for (field of group[\"fields\"]) {\n      type = field[\"type\"];\n      data = field[\"data\"];\n\n      // invalidate if atleast a single field has invalid data.\n      if (data === undefined || data === \"\" || data === null) return false;\n\n      if (typeof data == \"object\" && typeof data.length == \"number\")\n        // product quantities field validation\n        objects = data;\n      else if (type === \"product-category\") {\n        // product category validation\n\n        objects = data[\"value\"];\n        condition = data[\"condition\"];\n        value = data[\"quantity\"];\n      } else if (typeof data == \"object\" && data.length === undefined) {\n        // has ordered before validation\n\n        objects = data[\"products\"];\n        condition = data[\"condition\"];\n        value = data[\"value\"];\n      } else value = data;\n\n      min = get_allowed_minimum_value(condition);\n\n      if (\n        (objects !== undefined && objects.length < 1) ||\n        (condition !== undefined && !condition) ||\n        (!Number.isInteger(value) && value !== undefined && !value) ||\n        (Number.isInteger(value) && value < min) ||\n        (typeof value == \"number\" && value < min)\n      )\n        return false;\n    }\n  }\n\n  return true;\n}\n","import { esc_attr } from \"../helper\";\nimport { toggle_editing_mode } from \"./toggles\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nconst {\n  product_table_buttons,\n  condition_field_options,\n  bogo_form_fields,\n} = acfw_edit_coupon;\n\n/**\n * Trigger the add table row form event.\n *\n * @since 1.1.0\n */\nexport function trigger_add_table_row_form() {\n  const $button: JQuery = $(this),\n    $table: JQuery = $button.closest(\".acfw-styled-table\"),\n    $tbody: JQuery = $table.find(\"tbody\"),\n    exclude: number[] = $table.data(\"exclude\");\n\n  $tbody.find(\"tr.no-result\").remove();\n\n  $tbody.append(get_add_edit_form_row_markup(exclude));\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\n}\n\n/**\n * Trigger the edit table row form event.\n *\n * @since 1.1.0\n */\nexport function trigger_edit_table_row_form() {\n  const $button: JQuery = $(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $button.closest(\"table\"),\n    $tbody: JQuery = $row.closest(\"tbody\"),\n    data: any = $row.find(\"td.product\").data(\"product\");\n\n  let exclude: number[] = $table.data(\"exclude\");\n\n  exclude.splice(exclude.indexOf(data.product_id), 1);\n  $tbody.find(\"tr.no-result\").remove();\n  $row.replaceWith(get_add_edit_form_row_markup(exclude, data));\n  $table.data(\"exclude\", exclude);\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\n}\n\n/**\n * Actual function that saves/edits the table row.\n *\n * @since 1.1.0\n */\nexport function add_edit_table_row() {\n  const $button: JQuery = $(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $button.closest(\"table.acfw-styled-table\"),\n    $search: JQuery = $row.find(\".wc-product-search\"),\n    $condition: JQuery = $row.find(\".condition-select\"),\n    $quantity: JQuery = $row.find(\".condition-quantity\"),\n    minimum: number = $condition.val() === \"<\" ? 1 : 0;\n\n  let exclude: any = $table.data(\"exclude\");\n\n  if (\n    !$search.val() ||\n    !$condition.val() ||\n    !$quantity.val() ||\n    $quantity.val() < minimum\n  ) {\n    vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\n    return;\n  }\n\n  const productId: number = parseInt($search.val().toString());\n\n  // don't proceed if product has already been added to the table.\n  // this happens when the same product has been added to a new row and trying to cancel the row that already has the same value.\n  if (exclude.includes(productId)) {\n    vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\n    return;\n  }\n\n  const data: any = {\n    product_id: productId,\n    condition: $condition.val(),\n    quantity: parseInt($quantity.val() + \"\"),\n    product_label: $search.find(\"option:selected\").text(),\n    condition_label: $condition.find(\"option:selected\").text(),\n  };\n\n  let markup: string = `\n        <tr>\n            <td class=\"product\" data-product=\"${esc_attr(\n              JSON.stringify(data)\n            )}\">${data.product_label}</td>\n            <td class=\"condition\">${data.condition_label}</td>\n            <td class=\"quantity\">${data.quantity}</td>\n            <td class=\"actions\">\n                <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\n                <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\n            </td>\n        </tr>\n    `;\n\n  exclude.push(data.product_id);\n  $row.replaceWith(markup);\n  $table.data(\"exclude\", exclude);\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n  toggle_editing_mode(true);\n}\n\n/**\n * Trigger the cancel add/edit table row form event.\n *\n * @since 1.1.0\n */\nexport function cancel_add_edit_table_row() {\n  const $button: JQuery = jQuery(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $button.closest(\"table\"),\n    $tbody: JQuery = $row.closest(\"tbody\"),\n    data: any = $row.find(\"td.product\").data(\"product\"),\n    colspan: number = $row.find(\"td\").length;\n\n  let exclude: number[] = $table.data(\"exclude\");\n\n  // don't proceed if product has already been added to the table.\n  // this happens when the same product has been added to a new row and trying to cancel the row that already has the same value.\n  if (exclude.includes(data.product_id)) {\n    vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\n    return;\n  }\n\n  if (typeof data == \"object\") {\n    const { product_id, product_label, condition_label, quantity } = data;\n\n    let markup = `\n            <tr>\n                <td class=\"product\" data-product=\"${esc_attr(\n                  JSON.stringify(data)\n                )}\">${product_label}</td>\n                <td class=\"condition\">${condition_label}</td>\n                <td class=\"quantity\">${quantity}</td>\n                <td class=\"actions\">\n                    <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\n                    <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\n                </td>\n            </tr>\n        `;\n\n    exclude.push(product_id);\n    $row.replaceWith(markup);\n    $table.data(\"exclude\", exclude);\n    $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n  } else {\n    $row.remove();\n    append_blank_placeholder_table_row($tbody, colspan);\n  }\n}\n\n/**\n * Remove product in table.\n *\n * @since 1.0.0\n */\nexport function product_table_remove_product() {\n  const $button: JQuery = jQuery(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $row.closest(\"table\"),\n    $tbody: JQuery = $table.find(\"tbody\"),\n    colspan: number = $row.find(\"td\").length;\n\n  $row.remove();\n\n  let data: any = $row.find(\"td.product\").data(\"product\"),\n    exclude: number[] = $table.data(\"exclude\"),\n    index: number = exclude.indexOf(parseInt(data.product_id));\n\n  if (index !== -1) exclude.splice(index, 1);\n  $table.data(\"exclude\", exclude);\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n\n  append_blank_placeholder_table_row($tbody, colspan);\n  toggle_editing_mode(true);\n}\n\n/**\n * Append blank placeholder row on tables that are empty.\n *\n * @param {object} $tbody  Table tbody jQuery object.\n * @param {int}    colspan Number of row columns.\n */\nfunction append_blank_placeholder_table_row(\n  $tbody: JQuery,\n  colspan: number = 3\n) {\n  if ($tbody.find(\"tr\").length > 0) return;\n\n  $tbody.append(`\n        <tr class=\"no-result\">\n            <td colspan=\"${colspan}\">${acfw_edit_coupon.no_products_added}</td>\n        </tr>\n    `);\n}\n\n/**\n * Get add/edit form row markup.\n *\n * @since 1.0.0\n *\n * @param {object} exclude Array of excluded product ids.\n * @param {object} data    Product data.\n * @return {string} Add/edit form row markup.\n */\nfunction get_add_edit_form_row_markup(\n  exclude: number[] = [],\n  data: any = false\n): string {\n  let prodOption: string = \"\",\n    condOption: string = \"\";\n\n  if (typeof data == \"object\") {\n    const { product_id, product_label } = data;\n\n    prodOption = `<option value=\"${product_id}\">${product_label}</option>`;\n    condOption = data.condition;\n  }\n\n  const { add, edit, cancel } = product_table_buttons;\n  const { exactly, anyexcept, morethan, lessthan } = condition_field_options;\n  const { type_to_search } = bogo_form_fields;\n\n  const btnText = typeof data == \"object\" ? edit : add,\n    markup = `\n        <tr class=\"add-edit-form adding\">\n            <td class=\"product\" data-product=\"${\n              typeof data == \"object\" ? esc_attr(JSON.stringify(data)) : 0\n            }\">\n                <div class=\"object-search-wrap\">\n                    <select class=\"product-in-cart wc-product-search\"\n                        data-placeholder=\"${type_to_search}\"\n                        data-action=\"acfw_search_products\"\n                        data-exclude=\"${esc_attr(\n                          JSON.stringify(exclude)\n                        )}\">${prodOption}</select>\n                </div>\n            </td>\n            <td class=\"condition\">\n                <select class=\"condition-select\">\n                    <option value=\"=\" ${\n                      condOption == \"=\" ? \"selected\" : \"\"\n                    }>${exactly}</option>\n                    <option value=\"!=\" ${\n                      condOption == \"!=\" ? \"selected\" : \"\"\n                    }>${anyexcept}</option>\n                    <option value=\">\" ${\n                      condOption == \">\" ? \"selected\" : \"\"\n                    }>${morethan}</option>\n                    <option value=\"<\" ${\n                      condOption == \"<\" ? \"selected\" : \"\"\n                    }>${lessthan}</option>\n                </select>\n            </td>\n            <td class=\"quantity\">\n                <input type=\"number\" class=\"condition-quantity\" value=\"${\n                  typeof data == \"object\" ? data.quantity : 1\n                }\" min=\"${condOption == \"<\" ? 1 : 0}\">\n            </td>\n            <td class=\"actions\">\n                <button type=\"button\" class=\"condition-product-add button-primary\">${btnText}</button>\n                <button type=\"button\" class=\"cancel button\">${cancel}</button>\n            </td>\n        </tr>\n        `;\n\n  return markup;\n}\n","import { get_allowed_minimum_value } from \"../helper\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $: any = jQuery;\n\n/**\n * Restrict number input minimum value.\n *\n * @since 1.0.0\n */\nexport function restrict_number_min_value() {\n  const $input: JQuery = $(this),\n    min: number = parseInt($input.attr(\"min\")),\n    value: number = parseFloat($input.val() + \"\");\n\n  if (value < min) $input.val(min);\n}\n\n/**\n * Restrict number input minimum value.\n *\n * @since 1.0.0\n */\nexport function update_input_minimum_value() {\n  const $select: JQuery = $(this),\n    $field: JQuery = $select.closest(\".condition-field,.condition-set\"),\n    field_type: string = $field.data(\"type\"),\n    selector: string =\n      field_type == \"product-quantity\" ||\n      field_type == \"has-ordered-before\" ||\n      field_type == \"product-category\"\n        ? \"input.condition-quantity\"\n        : \"input.condition-value\",\n    $input: JQuery = $field.find(selector),\n    condition: string = $select.val() + \"\";\n\n  let min: number = get_allowed_minimum_value(condition);\n\n  $input.attr(\"min\", min).trigger(\"change\");\n}\n\n/**\n * Updated has ordered before condition label.\n *\n * @since 1.0.0\n */\nexport function update_has_ordered_before_condition_label() {\n  const { within_a_period_label, number_of_orders_label } = acfw_edit_coupon;\n\n  const $select: JQuery = $(this),\n    $field: JQuery = $select.closest(\".cart-quantity-field\"),\n    $label: JQuery = $field.find(\".condition-type-value label\");\n\n  if ($select.val() == \"within-a-period\") $label.text(within_a_period_label);\n  else $label.text(number_of_orders_label);\n}\n\n/**\n * Validate price field value on change.\n *\n * @since 1.2\n */\nexport function validate_price_field_value() {\n  const $input: JQuery = $(this),\n    $condition_block: JQuery = $input.closest(\".condition-field\"),\n    $condition_field: JQuery = $condition_block.find(\"select.condition-select\"),\n    condition_type: string = $condition_field.val() + \"\";\n\n  let input_price: string = $input.val() + \"\",\n    minimum_price: number = get_allowed_minimum_value(condition_type);\n\n  if (acfw_edit_coupon.decimal_separator !== \".\")\n    input_price = input_price.replace(acfw_edit_coupon.decimal_separator, \".\");\n\n  if (!$condition_field || parseFloat(input_price) > minimum_price - 1) return;\n\n  $input.val(minimum_price);\n}\n\n/**\n * Remove leading zeros from an input field.\n *\n * @since 1.2\n */\nexport function remove_leading_zeros(): void {\n  const $input: any = $(this);\n  let value: string = $input.val();\n\n  if (value == \"0\" + acfw_edit_coupon.decimal_separator) $input.val(\"0\");\n  if (\n    value == \"0\" ||\n    value.substring(0, 2) == \"0\" + acfw_edit_coupon.decimal_separator\n  )\n    return;\n\n  value = value.replace(/^0+/, \"\");\n  value =\n    value.substring(0, 1) == acfw_edit_coupon.decimal_separator\n      ? \"0\" + value\n      : value;\n\n  $input.val(value);\n}\n\n/**\n * Condition value type change (used in user and cart item meta condition fields).\n *\n * @since 1.4\n */\nexport function condition_value_type_change() {\n  const $type: JQuery = $(this),\n    $field: JQuery = $type.closest(\".condition-field\"),\n    $condition: JQuery = $field.find(\"select.condition-select\"),\n    $value: JQuery = $field.find(\"input.condition-value\");\n\n  switch ($type.val()) {\n    case \"string\":\n      $value.prop(\"type\", \"text\");\n      $value.removeClass(\"wc_input_price\");\n      if ($condition.val() == \">\" || $condition.val() == \"<\")\n        $condition.val(\"=\");\n      $condition\n        .find(\"option[value='>'],option[value='<']\")\n        .prop(\"disabled\", true);\n      break;\n\n    case \"number\":\n      $value.prop(\"type\", \"number\");\n      $value.removeClass(\"wc_input_price\");\n      $condition\n        .find(\"option[value='>'],option[value='<']\")\n        .prop(\"disabled\", false);\n      break;\n\n    case \"price\":\n      $value.prop(\"type\", \"text\");\n      $value.addClass(\"wc_input_price\");\n      $condition\n        .find(\"option[value='>'],option[value='<']\")\n        .prop(\"disabled\", false);\n      break;\n  }\n\n  $condition.trigger(\"change\");\n}\n","declare var jQuery: any;\n\nconst $: any = jQuery;\n\nexport function navigate_tabs(): void {\n  const $tab: JQuery = $(this),\n    $module_block = $tab.closest(\".woocommerce\").find(\"#acfw_cart_conditions\"),\n    tab: string = $tab.data(\"tab\");\n\n  $module_block.find(\".panel\").hide();\n  $module_block.find(`.panel[data-tab=\"${tab}\"]`).show();\n  set_active_tab($tab);\n}\n\nfunction set_active_tab($tab: JQuery): void {\n  $(\".acfw-cart-condition-tabs li\").removeClass(\"active\");\n  $tab.closest(\"li\").addClass(\"active\");\n}\n","import { add_condition_group, remove_condition_group } from \"./groups\";\nimport {\n  add_condition_field,\n  remove_condition_field,\n  get_condition_field,\n  is_condition_field,\n} from \"./fields\";\nimport { save_cart_conditions, save_on_coupon_publish } from \"./save\";\nimport {\n  toggle_add_condition_form,\n  toggle_editing_mode,\n  popuplate_taxonomy_term_options,\n  popuplate_shipping_region_options,\n} from \"./toggles\";\nimport {\n  trigger_add_table_row_form,\n  trigger_edit_table_row_form,\n  add_edit_table_row,\n  cancel_add_edit_table_row,\n  product_table_remove_product,\n} from \"./table\";\nimport {\n  restrict_number_min_value,\n  update_input_minimum_value,\n  update_has_ordered_before_condition_label,\n  validate_price_field_value,\n  remove_leading_zeros,\n  condition_value_type_change,\n} from \"./restrictions\";\n\nimport logic_template from \"./templates/logic\";\nimport condition_logic_template from \"./templates/condition_logic\";\nimport condition_group_template from \"./templates/condition_group\";\nimport { navigate_tabs } from \"./tabs\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $: any = jQuery;\nconst module_block: HTMLElement = document.querySelector(\n  \"#acfw_cart_conditions\"\n);\n\n/**\n * Add free products module events script.\n *\n * @since 1.0.0\n */\nexport default function cart_conditions_module_events() {\n  $(module_block).on(\"click\", \"#add-cart-condition-group\", add_condition_group);\n  $(module_block).on(\n    \"click\",\n    \"a.remove-condition-group\",\n    remove_condition_group\n  );\n  $(module_block).on(\"click\", \".add-condition-field\", add_condition_field);\n  $(module_block).on(\n    \"click\",\n    \"a.remove-condition-field\",\n    remove_condition_field\n  );\n  $(module_block).on(\n    \"click\",\n    \".add-condition-trigger\",\n    toggle_add_condition_form\n  );\n  $(module_block).on(\n    \"click\",\n    \".cancel-add-condition-field\",\n    toggle_add_condition_form\n  );\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table tfoot .add-table-row\",\n    trigger_add_table_row_form\n  );\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table td.actions a.edit\",\n    trigger_edit_table_row_form\n  );\n  $(module_block).on(\n    \"click\",\n    \"tr.add-edit-form .actions .condition-product-add\",\n    add_edit_table_row\n  );\n  $(module_block).on(\n    \"click\",\n    \"tr.add-edit-form .actions .cancel\",\n    cancel_add_edit_table_row\n  );\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table td.actions a.remove\",\n    product_table_remove_product\n  );\n  $(module_block).on(\"click\", \"#save-cart-conditions\", save_cart_conditions);\n  $(module_block).on(\n    \"change\",\n    \"input[type='number']\",\n    restrict_number_min_value\n  );\n  $(module_block).on(\n    \"change\",\n    \"select.condition-select\",\n    update_input_minimum_value\n  );\n  $(module_block).on(\n    \"change\",\n    \"select.has-ordered-before-type\",\n    update_has_ordered_before_condition_label\n  );\n  $(module_block).on(\"change\", \".wc_input_price\", validate_price_field_value);\n  $(module_block).on(\n    \"change\",\n    \"select.custom-taxonomy\",\n    popuplate_taxonomy_term_options\n  );\n  $(module_block).on(\n    \"change\",\n    \".shipping-zone-region-field select.condition-select\",\n    popuplate_shipping_region_options\n  );\n  $(module_block).on(\"blur\", \".wc_input_price\", remove_leading_zeros);\n  $(module_block).on(\n    \"change\",\n    \"select.value-type\",\n    condition_value_type_change\n  );\n  $(\"form#post\").on(\"submit\", save_on_coupon_publish);\n\n  $(module_block).find(\"select\").trigger(\"change\");\n  $(module_block).css(\"min-height\", $(\"#coupon_options\").height());\n\n  $(module_block).on(\"change\", \"input,select,textarea\", () => {\n    toggle_editing_mode(true);\n  });\n\n  $(module_block)\n    .find(\".condition-groups\")\n    .each(function () {\n      if ($(this).find(\".condition-group-fields\").length) $(this).show();\n    });\n\n  $(\".acfw-cart-condition-tabs\").on(\"click\", \"li a\", navigate_tabs);\n\n  setTimeout(init_cart_conditions, 500);\n}\n\n/**\n * Init cart conditions. Save the current cart conditions data.\n *\n * @since 1.0.0\n */\nfunction init_cart_conditions(): void {\n  const condition_groups = module_block.querySelector(\".condition-groups\");\n  const data: any = $(module_block).data(\"cart_conditions\");\n\n  const asyncFunc = async () => {\n    let cart_conditions: any[] = [];\n    let markup: string = \"\";\n\n    if (data.length) {\n      for (let row of data) {\n        if (row.type == \"group\") {\n          const fields_markup = load_condition_group_fields(row.fields);\n          markup += condition_group_template(fields_markup);\n        } else markup += condition_logic_template(row.value);\n      }\n    } else markup = condition_group_template();\n\n    $(condition_groups).html(markup);\n    $(condition_groups).find(\"input,select\").trigger(\"change\");\n\n    $(condition_groups)\n      .find(\".condition-group.new .add-condition-trigger\")\n      .trigger(\"click\");\n    $(condition_groups).find(\".condition-group\").removeClass(\"new\");\n  };\n\n  asyncFunc().then(() => {\n    setTimeout(() => $(\"body\").trigger(\"wc-enhanced-select-init\"), 1500);\n    toggle_editing_mode(false);\n  });\n}\n\n/**\n * Load condition group fields.\n *\n * @since 1.0.0\n *\n * @param fields\n */\nfunction load_condition_group_fields(fields: any[]): string {\n  let markup: string = \"\";\n  let temp: string = \"\";\n  let addLogic: boolean = true;\n\n  for (let field of fields) {\n    const { type, data } = field;\n\n    if (!is_condition_field(type)) {\n      addLogic = false;\n      continue;\n    }\n\n    if (type == \"logic\") {\n      temp = addLogic ? logic_template(data) : \"\";\n      continue;\n    }\n\n    const field_markup = get_condition_field(type, data);\n\n    if (field_markup) {\n      markup += temp + field_markup;\n      addLogic = true;\n    } else {\n      addLogic = false;\n    }\n\n    temp = \"\";\n  }\n\n  return markup;\n}\n","declare var acfw_edit_coupon: any;\n\nexport default function upsell_template() {\n\n    const { upsell } = acfw_edit_coupon;\n\n    if ( ! upsell ) return '';\n\n    return `\n    <div class=\"upsell\">\n        ${ upsell.bogo_deals_type }\n    </div>`;\n}","import { esc_attr } from \"../../helper\";\nimport upsell_template from \"./upsell\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Specific products condition type.\n *\n * @since 1.1.0\n */\nexport default function combination_products_template(\n  data: any,\n  is_deals = false\n) {\n  const { products, quantity, discount_type, discount_value } = data;\n  const { bogo_form_fields, bogo_instructions } = acfw_edit_coupon;\n  const {\n    quantity: quantityLabel,\n    products: productsLabel,\n    price_discount: priceDiscountLabel,\n    type_to_search,\n  } = bogo_form_fields;\n\n  const priceType: string = discount_type ? data.discount_type : \"override\";\n  const priceCol: string = is_deals\n    ? get_price_column(priceType, discount_value)\n    : \"\";\n  const priceTh: string = is_deals\n    ? `<th class=\"price\">${priceDiscountLabel}</th>`\n    : \"\";\n  const options: string = get_options(products);\n  const instructions: string = is_deals\n    ? `${bogo_instructions.apply_default} ${bogo_instructions.multiple_items}`\n    : bogo_instructions.trigger_default;\n\n  const markup = `\n      <p class=\"instructions\">${instructions}</p>\n      <table class=\"acfw-styled-table combined-products-form\" \n          data-combined=\"${esc_attr(JSON.stringify(data))}\"\n          data-isdeals=\"${is_deals}\">\n          <thead>\n              <tr>\n                  <th class=\"products-list\">${productsLabel}</th>\n                  <th class=\"quantity\">${quantityLabel}</th>\n                  ${priceTh}\n              </tr>\n          </thead>\n          <tbody>\n              <tr>\n                  <td class=\"products-list object\">\n                      <select class=\"combined-products-list wc-product-search\"\n                      data-placeholder=\"${type_to_search}\"\n                      data-action=\"acfw_search_products\"\n                      data-exclude=\"\" multiple>${options}</select>\n                  </td>\n                  <td class=\"quantity\">\n                      <input type=\"number\" class=\"condition-quantity\" value=\"${quantity}\" min=\"1\">\n                  </td>\n                  ${priceCol}\n              </tr>\n          </tbody>\n      </table>\n      ${upsell_template()}\n    `;\n\n  return markup;\n}\n\n/**\n * Get product(s) price column.\n *\n * @since 1.15\n *\n * @param priceType\n * @param discount_value\n */\nfunction get_price_column(\n  priceType: string,\n  discount_value: string = \"0\"\n): string {\n  const { currency_symbol, discount_field_options } = acfw_edit_coupon;\n  const { override, percent, fixed } = discount_field_options;\n\n  return `\n    <td class=\"price\">\n        <div>\n        <select class=\"discount_type\">\n            <option value=\"override\" ${\n              priceType == \"override\" ? \"selected\" : \"\"\n            }>${currency_symbol} : ${override}</option>\n            <option value=\"percent\" ${\n              priceType == \"percent\" ? \"selected\" : \"\"\n            }>% : ${percent}</option>\n            <option value=\"fixed\" ${\n              priceType == \"fixed\" ? \"selected\" : \"\"\n            }>-${currency_symbol} : ${fixed}</option>\n        </select>\n        <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${discount_value}\">\n        </div>\n    </td>\n    `;\n}\n\n/**\n * Get product(s) row options.\n *\n * @since 1.15\n *\n * @param products\n */\nfunction get_options(products: any): string {\n  if (typeof products != \"object\" || !products.length) return;\n\n  let options = \"\";\n  for (let p of products)\n    options += `<option value=\"${p.product_id}\" selected>${p.label}</option>`;\n\n  return options;\n}\n","import { esc_attr } from \"../../helper\";\n\n/**\n * Category table row first column template.\n * \n * @param data \n */\nexport default function category_first_column_template( data: any ): string {\n\n    const { category_id , category_label } = data;\n\n    return `\n    <td class=\"category category-${ category_id } object\" data-category=\"${ esc_attr( JSON.stringify(data) ) }\">\n        ${ category_label }\n    </td>\n    `;\n}","declare var acfw_edit_coupon: any;\n\n/**\n * Placeholder table row.\n * \n * @since 1.15\n * \n * @param colspan \n */\nexport default function placeholder_table_row_template( colspan: number = 3, type: string = \"product\" ): string {\n\n    const { no_products_added , no_categories_added } = acfw_edit_coupon;\n    return `\n    <tr class=\"no-result\">\n        <td colspan=\"${ colspan }\">${ type == \"category\" ? no_categories_added : no_products_added }</td>\n    </tr>\n    `;\n}","import { esc_attr } from \"../../helper\";\nimport category_first_column_template from \"./category_first_column\";\nimport placeholder_row_template from \"./placeholder_row\";\nimport upsell_template from \"./upsell\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Product cagtegories condition type.\n *\n * @since 1.1.0\n */\nexport default function product_categories_template(\n  data: any,\n  data_type: string,\n  is_deals = false\n) {\n  const {\n    add_prod_cat_label,\n    bogo_form_fields,\n    bogo_instructions,\n  } = acfw_edit_coupon;\n  const {\n    quantity: quantityLabel,\n    product_cat: categoryLabel,\n  } = bogo_form_fields;\n\n  const colspan: number = is_deals ? 4 : 3;\n  const priceTh: string = is_deals\n    ? `<th class=\"price\">Price/Discount</th>`\n    : \"\";\n  const instructions: string = is_deals\n    ? `${bogo_instructions.apply_default} ${bogo_instructions.multiple_items}`\n    : bogo_instructions.trigger_default;\n\n  let tbody: string = \"\";\n  let exclude: number[] = [];\n\n  if (data.length >= 1 && data_type == \"product-categories\") {\n    for (let product_cat of data) {\n      let {\n        category_id,\n        quantity,\n        discount_type,\n        discount_value,\n      } = product_cat;\n      let priceCol: string = is_deals\n        ? get_price_column(discount_type, discount_value)\n        : \"\";\n\n      exclude.push(category_id);\n      tbody += `\n                <tr>\n                    ${category_first_column_template(product_cat)}\n                    <td class=\"quantity\">${quantity}</td>\n                    ${priceCol}\n                    <td class=\"actions\">\n                        <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\n                        <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\n                    </td>\n                </tr>\n            `;\n    }\n  } else {\n    tbody = placeholder_row_template(colspan, \"category\");\n  }\n\n  return `\n        <p class=\"instructions\">${instructions}</p>\n        <table class=\"acfw-styled-table\" \n            data-type=\"category\" \n            data-exclude=\"${esc_attr(JSON.stringify(exclude))}\" \n            data-isdeals=\"${is_deals}\">\n            <thead>\n                <tr>\n                    <th class=\"product-cat\">${categoryLabel}</th>\n                    <th class=\"quantity\">${quantityLabel}</th>\n                    ${priceTh}\n                    <th class=\"actions\"></th>\n                </tr>\n            </thead>\n            <tbody>${tbody}</tbody>\n            <tfoot>\n                <tr>\n                    <td colspan=\"${colspan}\">\n                        <a class=\"add-table-row\" href=\"javascript:void(0);\">\n                            <i class=\"dashicons dashicons-plus\"></i>\n                            ${add_prod_cat_label}\n                        </a>\n                    </td>\n                </tr>\n            </tfoot>\n        </table>\n        ${upsell_template()}\n    `;\n}\n\n/**\n * Get price column.\n *\n * @param discount_type\n * @param discount_value\n */\nfunction get_price_column(\n  discount_type: string = \"override\",\n  discount_value: string = \"0\"\n) {\n  return `<td class=\"price\">\n        (${discount_type}) ${discount_value}\n    </td>`;\n}\n","import { esc_attr } from \"../../helper\";\n\n/**\n * Product table row first column template.\n * \n * @param data \n */\nexport default function product_first_column_template( data: any ): string {\n\n    const { product_id , product_label } = data;\n\n    return `\n    <td class=\"product product-${ product_id } object\" data-product=\"${ esc_attr( JSON.stringify(data) ) }\">\n        ${ product_label }\n    </td>\n    `\n}","import { esc_attr } from \"../../helper\";\nimport product_first_column_template from \"./product_first_column\";\nimport placeholder_row_template from \"./placeholder_row\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Specific products condition type.\n *\n * @since 1.1.0\n */\nexport default function specific_products_template(\n  data: any,\n  data_type: string,\n  is_deals: boolean = false\n) {\n  const {\n    add_product_label,\n    bogo_form_fields,\n    bogo_instructions,\n  } = acfw_edit_coupon;\n  const { quantity: quantityLabel, product: productLabel } = bogo_form_fields;\n\n  const colspan: number = is_deals ? 4 : 3;\n  const priceTh: string = is_deals\n    ? `<th class=\"price\">Price/Discount</th>`\n    : \"\";\n\n  let tbody: string = \"\";\n  let exclude: number[] = [];\n\n  if (data.length >= 1 && data_type == \"specific-products\") {\n    for (let product of data) {\n      let { quantity, discount_type, discount_value } = product;\n      let priceCol: string = is_deals\n        ? get_price_column(discount_type, discount_value)\n        : \"\";\n\n      exclude.push(product.product_id);\n      tbody += `\n                <tr>\n                    ${product_first_column_template(product)}\n                    <td class=\"quantity\">${quantity}</td>\n                    ${priceCol}\n                    <td class=\"actions\">\n                        <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\n                        <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\n                    </td>\n                </tr>\n            `;\n    }\n  } else {\n    tbody = placeholder_row_template(colspan);\n  }\n\n  const markup = `\n        <p class=\"instructions\">${bogo_instructions.apply_default}</p>\n        <table class=\"product-quantity-condition-table acfw-styled-table\" \n            data-type=\"product\" data-exclude=\"${esc_attr(\n              JSON.stringify(exclude)\n            )}\" \n            data-isdeals=\"${is_deals}\">\n            <thead>\n                <tr>\n                    <th class=\"product\">${productLabel}</th>\n                    <th class=\"quantity\">${quantityLabel}</th>\n                    ${priceTh}\n                    <th class=\"actions\"></th>\n                </tr>\n            </thead>\n            <tbody>${tbody}</tbody>\n            <tfoot>\n                <tr>\n                    <td colspan=\"${colspan}\">\n                        <a class=\"add-table-row\" href=\"javascript:void(0);\">\n                            <i class=\"dashicons dashicons-plus\"></i>\n                            ${add_product_label}\n                        </a>\n                    </td>\n                </tr>\n            </tfoot>\n        </table>\n    `;\n\n  return markup;\n}\n\n/**\n * Get price column.\n *\n * @param discount_type\n * @param discount_value\n */\nfunction get_price_column(\n  discount_type: string = \"override\",\n  discount_value: string = \"0\"\n) {\n  return `<td class=\"price\">\n        (${discount_type}) ${discount_value}\n    </td>`;\n}\n","import { esc_attr } from \"../../helper\";\nimport upsell_template from \"./upsell\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Any Products template.\n */\nexport default function any_products_template(data: any, isDeals = false) {\n  if (isDeals) return apply_template(data);\n  else return trigger_template(data);\n}\n\n/**\n * Any products trigger template.\n *\n * @since 2.6\n *\n * @param data\n */\nfunction trigger_template(data: any) {\n  const { quantity } = data;\n  const { bogo_instructions, bogo_form_fields } = acfw_edit_coupon;\n\n  return `\n    <p class=\"instructions\">${bogo_instructions.anyproducts_trigger}</p>\n    <div class=\"any-products-trigger-form any-products-form\" data-anyproducts=\"${esc_attr(\n      JSON.stringify(data)\n    )}\">\n      <div class=\"trigger-field-row trigger-quantity-field-row\">\n        <label for=\"any_products_trigger_qty\">${\n          bogo_form_fields.trigger_quantity\n        }</label>\n        <input type=\"number\" id=\"any_products_trigger_qty\" class=\"condition-quantity\" value=\"${\n          quantity ?? \"1\"\n        }\" min=\"1\" />\n      </div>\n    </div>\n    ${upsell_template()}\n  `;\n}\n\n/**\n * Any products apply template.\n *\n * @since 2.6\n *\n * @param data\n */\nfunction apply_template(data: any) {\n  const { quantity, discount_type, discount_value } = data;\n  const {\n    currency_symbol,\n    discount_field_options,\n    bogo_form_fields,\n    bogo_instructions,\n  } = acfw_edit_coupon;\n  const { override, percent, fixed } = discount_field_options;\n  const {\n    quantity: quantityLabel,\n    price_discount: priceDiscountLabel,\n    discount_type: discountTypeLabel,\n  } = bogo_form_fields;\n\n  const priceType: string = discount_type ? data.discount_type : \"override\";\n\n  return `\n    <p class=\"instructions\">${bogo_instructions.anyproducts_apply}</p>\n    <table class=\"acfw-styled-table any-products-apply-form any-products-form\" data-anyproducts=\"${esc_attr(\n      JSON.stringify(data)\n    )}\">\n      <thead>\n        <tr>\n          <th class=\"quantity\">${quantityLabel}</th>\n          <th class=\"type\">${discountTypeLabel}</th>\n          <th class=\"price\">${priceDiscountLabel}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"quantity object\">\n            <input type=\"number\" class=\"condition-quantity\" value=\"${\n              quantity ?? \"1\"\n            }\" min=\"1\">\n          </td>\n          <td class=\"type\">\n            <select class=\"discount_type\">\n              <option value=\"override\" ${\n                priceType == \"override\" ? \"selected\" : \"\"\n              }>${currency_symbol} : ${override}</option>\n              <option value=\"percent\" ${\n                priceType == \"percent\" ? \"selected\" : \"\"\n              }>% : ${percent}</option>\n              <option value=\"fixed\" ${\n                priceType == \"fixed\" ? \"selected\" : \"\"\n              }>-${currency_symbol} : ${fixed}</option>\n            </select>\n          </td>\n          <td class=\"price\">\n            <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${\n              discount_value ?? \"0\"\n            }\">\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    ${upsell_template()}\n  `;\n}\n","import combination_products_template from \"./templates/combination_products\";\nimport product_categories_template from \"./templates/product_categories\";\nimport specific_products_template from \"./templates/specific_products\";\nimport any_products_template from \"./templates/any_products\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nconst module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\n\n/**\n * Toggle editing mode.\n *\n * @since 1.0.0\n *\n * @param {toggle} bool True to toggle editing mode, false otherwise.\n */\nexport function toggle_editing_mode(toggle: boolean) {\n  $(module_block).data(\"editing\", toggle);\n  $(module_block).find(\"#save-bogo-deals\").prop(\"disabled\", !toggle);\n}\n\n/**\n * Toggle condition type.\n *\n * @since 1.1.0\n */\nexport function toggle_block_data_type(e: JQuery.Event) {\n  const $select: JQuery = $(this),\n    block_type: string = $select.data(\"block\"),\n    condition_block: HTMLElement = module_block.querySelector(\n      \".bogo-conditions-block\"\n    ),\n    deals_block: HTMLElement = module_block.querySelector(\n      \".bogo-product-deals-block\"\n    ),\n    bogo_deals: any = $(module_block).data(\"bogo_deals\"),\n    conditions: any = bogo_deals.conditions ? bogo_deals.conditions : null,\n    deals: any = bogo_deals.deals ? bogo_deals.deals : null,\n    block_data_type: string =\n      block_type == \"conditions\"\n        ? bogo_deals.conditions_type\n        : bogo_deals.deals_type;\n\n  // get correct block data.\n  let block_data: any = null;\n  if (\"conditions\" === block_type)\n    block_data =\n      bogo_deals.conditions_type == $select.val() ? conditions : block_data;\n  else block_data = bogo_deals.deals_type == $select.val() ? deals : block_data;\n\n  const isDeal = block_type == \"deals\";\n\n  let isPremium = false,\n    markup,\n    tempBlock;\n\n  switch ($select.val()) {\n    case \"combination-products\":\n      markup = combination_products_template(block_data ?? {}, isDeal);\n      isPremium = true;\n      break;\n\n    case \"product-categories\":\n      markup = product_categories_template(\n        block_data ?? [],\n        block_data_type,\n        isDeal\n      );\n      isPremium = true;\n      break;\n\n    case \"any-products\":\n      markup = any_products_template(block_data ?? {}, isDeal);\n      isPremium = true;\n      break;\n\n    case \"specific-products\":\n    default:\n      markup = specific_products_template(\n        block_data ?? [],\n        block_data_type,\n        isDeal\n      );\n      isPremium = false;\n      break;\n  }\n\n  if (block_type == \"conditions\") {\n    $(condition_block)\n      .html(markup)\n      .find(\"input.condition-quantity\")\n      .trigger(\"change\" === e.type ? \"change\" : \"acfw_fetch_data\");\n    tempBlock = condition_block;\n  } else {\n    const $multipleDesc = $(module_block).find(\".multiple-items-desc\");\n\n    if (\"specific-products\" !== $select.val()) $multipleDesc.show();\n    else $multipleDesc.hide();\n\n    $(deals_block)\n      .html(markup)\n      .find(\"input.condition-quantity\")\n      .trigger(\"change\" === e.type ? \"change\" : \"acfw_fetch_data\");\n    tempBlock = deals_block;\n  }\n\n  if (isPremium && undefined !== acfw_edit_coupon.upsell)\n    $(tempBlock).addClass(\"premium-only\");\n  else $(tempBlock).removeClass(\"premium-only\");\n\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\n  $(\"body\").trigger(\"init_tooltips\");\n}\n\n/**\n * Force apply type to \"Same Product\" block when \"each-product\" is selected as base for Any Products trigger.\n *\n * @since 1.4\n */\nexport function forceApplyToSameProductForEachProductBase() {\n  const $this = $(this);\n  const $module = $this.closest(\"#acfw_bogo_deals\");\n  const $applySelect = $module.find(\"#bogo-deals-type\");\n  const base = $this.val();\n\n  if (\"each-product\" === base) {\n    $applySelect.val(\"same-products\").trigger(\"change\");\n  }\n}\n\nfunction validateTriggerApplyCompatibility($select: JQuery, isDeals: boolean) {\n  const $module: JQuery = $select.closest(\"#acfw_bogo_deals\");\n  const triggerType: string = $module\n    .find(\"select#bogo-condition-type\")\n    .val()\n    .toString();\n  const applyType: string = $module\n    .find(\"select#bogo-deals-type\")\n    .val()\n    .toString();\n  const baseType = $module\n    .find(\"input[name='acfw_bogo_trigger_base']:checked\")\n    .val();\n\n  if (\n    isDeals &&\n    \"any-products\" === triggerType &&\n    \"each-product\" === baseType &&\n    \"same-products\" !== applyType\n  ) {\n    $select.val(\"same-products\");\n    vex.dialog.alert({\n      unsafeMessage: `Any products trigger type based on each product's quantity can only work with <code>Same Products</code> apply type.`,\n    });\n    return false;\n  }\n\n  return true;\n}\n","import { toggle_overlay, validateDiscount } from \"../helper\";\nimport { toggle_editing_mode } from \"./toggles\";\nimport placeholder_table_row_template from \"./templates/placeholder_row\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var woocommerce_admin_meta_boxes: any;\ndeclare var ajaxurl: string;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nconst module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\nconst { post_id } = woocommerce_admin_meta_boxes;\n\n/**\n * Save BOGO Deals.\n *\n * @since 1.0.0\n */\nexport function save_bogo_deals() {\n  // cancel product table edit form rows.\n  $(\"#acfw_bogo_deals\")\n    .find(\".acfw-styled-table tr.add-edit-form button.cancel\")\n    .trigger(\"click\");\n\n  const { post_status, upsell } = acfw_edit_coupon;\n\n  const condition_rows: NodeList = module_block.querySelectorAll(\n      \".bogo-conditions-block table.acfw-styled-table tbody td.object,.bogo-conditions-block .any-products-trigger-form\"\n    ),\n    deal_rows: NodeList = module_block.querySelectorAll(\n      \".bogo-product-deals-block table.acfw-styled-table tbody td.object\"\n    ),\n    overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\"),\n    type_field: HTMLInputElement = module_block.querySelector(\n      \"input[name='bogo_type']:checked\"\n    ),\n    conditions_type: string = $(module_block)\n      .find(\"#bogo-condition-type\")\n      .val(),\n    deals_type: string = $(module_block).find(\"#bogo-deals-type\").val(),\n    $notice_options: JQuery = $(module_block).find(\".notice-option\");\n\n  const conditions: any = get_data(condition_rows, conditions_type);\n  const deals: any = get_data(deal_rows, deals_type);\n  const type: string = type_field ? type_field.value : null;\n\n  // error flag variables.\n  let isTriggerError: boolean = false;\n  let isApplyError: boolean = false;\n\n  // validate any products trigger data.\n  if (\"any-products\" === conditions_type) {\n    isTriggerError = conditions?.quantity < 1;\n  }\n\n  // validate any products apply data.\n  if (\"any-products\" === deals_type) {\n    isApplyError =\n      !deals?.discount_type || !deals?.discount_value || deals?.quantity < 1;\n  }\n\n  // validate combination products trigger data.\n  if (\"combination-products\" === conditions_type) {\n    isTriggerError = !conditions?.products?.length || conditions?.quantity < 1;\n  }\n\n  // validate combination products apply data.\n  if (\"combination-products\" === deals_type) {\n    isApplyError =\n      !deals?.products?.length ||\n      !deals?.discount_type ||\n      !deals?.discount_value ||\n      deals?.quantity < 1;\n  }\n\n  if (\n    conditions?.length < 1 ||\n    deals?.length < 1 ||\n    !type ||\n    isTriggerError ||\n    isApplyError\n  ) {\n    vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg);\n\n    // Add save error flag class in #acfw_bogo_deals\n    $(module_block).addClass(\"save-error\");\n    return;\n  }\n\n  if (\n    upsell !== undefined &&\n    (conditions_type !== \"specific-products\" ||\n      deals_type !== \"specific-products\")\n  ) {\n    vex.dialog.alert(acfw_edit_coupon.bogo_deals_save_error_msg);\n\n    // Add save error flag class in #acfw_bogo_deals\n    $(module_block).addClass(\"save-error\");\n    return;\n  }\n\n  // validate discount by type for any products and combination products deal type.\n  if (\n    [\"any-products\", \"combination-products\"].includes(deals_type) &&\n    !validateDiscount(deals?.discount_type, deals?.discount_value)\n  ) {\n    vex.dialog.alert(acfw_edit_coupon.discount_type_value_error_msg);\n\n    // Add save error flag class in #acfw_bogo_deals\n    $(module_block).addClass(\"save-error\");\n    return;\n  }\n\n  const notice_settings = {\n    message: $notice_options\n      .find(\"textarea[name='acfw_bogo_notice_message_text']\")\n      .val(),\n    button_text: $notice_options\n      .find(\"input[name='acfw_bogo_notice_button_text']\")\n      .val(),\n    button_url: $notice_options\n      .find(\"input[name='acfw_bogo_notice_button_url']\")\n      .val(),\n    notice_type: $notice_options\n      .find(\"select[name='acfw_bogo_notice_type']\")\n      .val(),\n  };\n\n  toggle_overlay(overlay, \"show\");\n\n  $(module_block).trigger(\"save_bogo_deals\");\n\n  const dataToSave = {\n    conditions: conditions,\n    deals: deals,\n    conditions_type: conditions_type,\n    deals_type: deals_type,\n    type: type,\n    notice_settings: notice_settings,\n  };\n\n  $.post(\n    ajaxurl,\n    {\n      action: \"acfw_save_bogo_deals\",\n      coupon_id: post_id,\n      ...dataToSave,\n    },\n    (response: any) => {\n      if (response.status == \"success\") {\n        // replace data in state with latest one.\n        $(module_block).data(\"bogo_deals\", dataToSave);\n\n        // if coupon is not published yet, then save it as draft.\n        if (post_status !== \"publish\") {\n          if (!$(\"input[name='post_title']\").val())\n            $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\n\n          $(\"select[name='post_status']\")\n            .append(new Option(\"Published\", \"publish\"))\n            .val(\"publish\");\n\n          $(\"#publishing-action\").append(`\n                    <input type=\"hidden\" name=\"publish\" value=\"Publish\">\n                `);\n          $(\"input#publish\").click();\n        }\n      } else {\n        if (response.error_msg) vex.dialog.alert(response.error_msg);\n      }\n\n      $(module_block).find(\"#clear-bogo-deals\").prop(\"disabled\", false);\n      toggle_editing_mode(false);\n      toggle_overlay(overlay, \"hide\");\n    },\n    \"json\"\n  );\n}\n\n/**\n * Get BOGO Deals data.\n *\n * @since 1.0.0\n *\n * @param rows\n * @param type\n */\nfunction get_data(rows: NodeList, type: string): any {\n  let data = [],\n    temp;\n\n  switch (type) {\n    case \"any-products\":\n      data = $(rows).closest(\".any-products-form\").data(\"anyproducts\");\n      break;\n\n    case \"combination-products\":\n      data = $(rows).closest(\"table.combined-products-form\").data(\"combined\");\n      break;\n\n    case \"product-categories\":\n      rows.forEach((row: HTMLElement) => {\n        temp = jQuery(row).data(\"category\");\n        if (temp) data.push(temp);\n      });\n      break;\n\n    case \"specific-products\":\n    default:\n      rows.forEach((row: HTMLElement) => {\n        temp = jQuery(row).data(\"product\");\n        if (temp) data.push(temp);\n      });\n      break;\n  }\n\n  return data;\n}\n\n/**\n * Clear BOGO Deals.\n *\n * @since 1.0.0\n */\nexport function clear_bogo_deals() {\n  const $button: JQuery = $(this);\n\n  if (!confirm($button.data(\"prompt\"))) return;\n\n  const condition_rows: HTMLElement = module_block.querySelector(\n      \".bogo-conditions-block table.acfw-styled-table tbody\"\n    ),\n    deal_rows: HTMLElement = module_block.querySelector(\n      \".bogo-product-deals-block table.acfw-styled-table tbody\"\n    ),\n    overlay: HTMLElement = module_block.querySelector(\".acfw-overlay\"),\n    type_field: HTMLInputElement = module_block.querySelector(\n      \"input[name='bogo_type']:checked\"\n    );\n\n  toggle_overlay(overlay, \"show\");\n\n  $.post(\n    ajaxurl,\n    {\n      action: \"acfw_clear_bogo_deals\",\n      coupon_id: post_id,\n      _wpnonce: $button.data(\"nonce\"),\n    },\n    (response: any) => {\n      if (response.status == \"success\") {\n        $(condition_rows).html(placeholder_table_row_template(3));\n        $(deal_rows).html(placeholder_table_row_template(4));\n        $(type_field).prop(\"checked\", false);\n\n        $button.prop(\"disabled\", true);\n        toggle_editing_mode(false);\n\n        // if coupon is not published yet, then save it as draft.\n        if ($(\"#post-status-display\").text() != \"Published\") {\n          if (!$(\"input[name='post_title']\").val())\n            $(\"input[name='post_title']\").val(\"coupon-\" + post_id);\n\n          $(\"input#publish\").click();\n        }\n      } else {\n        if (response.error_msg) vex.dialog.alert(response.error_msg);\n      }\n\n      toggle_overlay(overlay, \"hide\");\n    },\n    \"json\"\n  );\n}\n\n/**\n * Update combined products list.\n *\n * @since 1.1.0\n */\nexport function update_combined_products_list() {\n  const $table: JQuery = $(this).closest(\"table.combined-products-form\"),\n    current_data: any = $table.data(\"combined\"),\n    $options: JQuery = $table.find(\".wc-product-search option:selected\"),\n    quantity: number = parseInt(\n      $table.find(\"input.condition-quantity\").val() + \"\"\n    ),\n    conditions: any = { products: [], quantity: quantity },\n    is_deals: string = $table.data(\"isdeals\");\n\n  if (is_deals) {\n    const $discount_type: JQuery = $table.find(\"select.discount_type\"),\n      $discount_value: JQuery = $table.find(\"input.discount_value\"),\n      discount_val: number = parseFloat($discount_value.val().toString());\n\n    if (discount_val < 0 || isNaN(discount_val)) {\n      $discount_value.val(current_data ? current_data.discount_value : \"\");\n      vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\n      return;\n    } else {\n      conditions.discount_type = $discount_type.val();\n      conditions.discount_value = $discount_value.val();\n    }\n  }\n\n  let $temp, x;\n\n  for (x = 0; x < $options.length; x++) {\n    $temp = $($options[x]);\n    conditions.products.push({ product_id: $temp.val(), label: $temp.text() });\n  }\n\n  $table.data(\"combined\", conditions);\n  toggle_editing_mode(true);\n}\n\n/**\n * Save on coupon publish.\n *\n * @since 1.1.0\n *\n * @param {e} object Event Object.\n */\nexport function save_on_coupon_publish(e: Event) {\n  if (!$(module_block).data(\"editing\")) return;\n\n  e.preventDefault();\n  $(module_block).find(\"#save-bogo-deals\").trigger(\"click\");\n\n  // delay for 1 second to give time for\n  setTimeout(() => {\n    // If BOGO Deals displays an error message then don't save the coupon\n    if ($(module_block).hasClass(\"save-error\"))\n      $(module_block).removeClass(\"save-error\");\n    else $(\"form#post\").submit();\n  }, 1000);\n}\n\n/**\n * Update any products trigger data when an input in the block's value is changed.\n *\n * @since 1.4\n */\nexport function update_any_products_trigger_data(e: JQuery.Event) {\n  const $block = $(this).closest(\".any-products-trigger-form\");\n  const quantity: number = parseInt(\n    $block.find(\"input#any_products_trigger_qty\").val()\n  );\n  const data = {\n    quantity: quantity && !isNaN(quantity) ? quantity : 0,\n  };\n\n  $block.data(\"anyproducts\", data);\n  if (e.type === \"change\") toggle_editing_mode(true);\n}\n\n/**\n * Update any products apply data when an input in the block's value is changed.\n *\n * @since 1.4\n */\nexport function update_any_products_apply_data(e: JQuery.Event) {\n  const $block = $(this).closest(\".any-products-apply-form\");\n  const quantity: number = parseInt(\n    $block.find(\"input.condition-quantity\").val()\n  );\n  const discountType: string = $block\n    .find(\"select.discount_type\")\n    .val()\n    .toString();\n  const discountValue: string = $block\n    .find(\"input.discount_value\")\n    .val()\n    .toString();\n\n  const data = {\n    quantity: quantity && !isNaN(quantity) ? quantity : 0,\n    discount_type: discountType ?? \"\",\n    discount_value: discountValue ?? \"\",\n  };\n\n  $block.data(\"anyproducts\", data);\n  if (e.type === \"change\") toggle_editing_mode(true);\n}\n","import { esc_attr } from \"../../helper\";\n\ndeclare var acfw_edit_coupon: any;\n\n/**\n * Add edit row template.\n *\n * @since 1.15\n *\n * @param type\n * @param exclude\n * @param is_deals\n */\nexport default function add_edit_row_template(\n  type: string,\n  exclude: number[],\n  is_deals: string,\n  data: any = false\n): string {\n  const { type_to_search } = acfw_edit_coupon.bogo_form_fields;\n  const { add, edit, cancel } = acfw_edit_coupon.product_table_buttons;\n  const { quantity } = data;\n\n  const option: string = typeof data == \"object\" ? get_option(type, data) : \"\";\n  const priceCol: string = is_deals ? get_price_column(data) : \"\";\n  const btnText: string = typeof data == \"object\" ? edit : add;\n\n  return `\n    <tr class=\"add-edit-form adding\">\n        <td class=\"product\" data-object=\"${\n          typeof data == \"object\" ? esc_attr(JSON.stringify(data)) : 0\n        }\">\n            <div class=\"object-search-wrap\">\n                <select class=\"${\n                  type == \"category\"\n                    ? \"product-category-in-cart\"\n                    : \"product-in-cart\"\n                } wc-product-search\"\n                    data-placeholder=\"${type_to_search}\"\n                    data-action=\"${\n                      type == \"category\"\n                        ? \"acfw_search_product_category\"\n                        : \"acfw_search_products\"\n                    }\"\n                    data-exclude=\"${esc_attr(\n                      JSON.stringify(exclude)\n                    )}\">${option}</select>\n            </div>\n        </td>\n        <td class=\"quantity\">\n            <input type=\"number\" class=\"condition-quantity\" value=\"${\n              typeof data == \"object\" ? quantity : 1\n            }\" min=\"1\">\n        </td>\n        ${priceCol}\n        <td class=\"actions\">\n            <button type=\"button\" class=\"condition-product-add button-primary\">${btnText}</button>\n            <button type=\"button\" class=\"cancel button\">${cancel}</button>\n        </td>\n    </tr>\n    `;\n}\n\n/**\n * Get option markup.\n *\n * @since 1.15\n *\n * @param type\n * @param data\n */\nfunction get_option(type: string, data: any): string {\n  const { category_id, product_id, category_label, product_label } = data;\n  const value: string = type == \"category\" ? category_id : product_id;\n  const label: string = type == \"category\" ? category_label : product_label;\n\n  return `<option value=\"${value}\">${label}</option>`;\n}\n\nfunction get_price_column(data: any): string {\n  const { currency_symbol, discount_field_options } = acfw_edit_coupon;\n  const { override, percent, fixed } = discount_field_options;\n  const { discount_type, discount_value } = data;\n  const value: string =\n    typeof data == \"object\" && discount_value ? discount_value : \"0\";\n\n  return `\n    <td class=\"price\">\n        <div>\n        <select class=\"discount_type\">\n            <option value=\"override\" ${\n              discount_type == \"override\" ? \"selected\" : \"\"\n            }>${currency_symbol} : ${override}</option>\n            <option value=\"percent\" ${\n              discount_type == \"percent\" ? \"selected\" : \"\"\n            }>% : ${percent}</option>\n            <option value=\"fixed\" ${\n              discount_type == \"fixed\" ? \"selected\" : \"\"\n            }>-${currency_symbol} : ${fixed}</option>\n        </select>\n        <input type=\"text\" class=\"discount_value short wc_input_price\" value=\"${value}\">\n        </div>\n    </td>\n    `;\n}\n","\nimport category_first_column_template from \"./category_first_column\";\nimport product_first_column_template from \"./product_first_column\";\n\n/**\n * Table single row markup.\n * \n * @since 1.15\n * \n * @param data \n * @param type \n * @param is_deals \n */\nexport default function table_row_template( data: any , type: string , is_deals: string ): string {\n\n    const { quantity , discount_type ,discount_value } = data;\n    const priceCol: string = is_deals ? `<td class=\"price\">(${ discount_type }) ${ discount_value }</td>` : \"\";\n\n    return `\n    <tr>\n        ${ get_first_column_markup( data , type ) }\n        <td class=\"quantity\">${ quantity }</td>\n        ${ priceCol }\n        <td class=\"actions\">\n            <a class=\"edit\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-edit\"></span></a>\n            <a class=\"remove\" href=\"javascript:void(0)\"><span class=\"dashicons dashicons-no\"></span></a>\n        </td>\n    </tr>`;\n}\n\n/**\n * Get first column markup.\n * \n * @since 1.15\n * \n * @param data \n * @param type \n */\nfunction get_first_column_markup( data: any, type: string ): string {\n\n    switch ( type ) {\n        case \"category\" :\n            return category_first_column_template( data );\n        case \"product\" :\n            return product_first_column_template( data );\n    }\n}","import { toggle_editing_mode } from \"./toggles\";\nimport { price_to_float, validateDiscount } from \"../helper\";\n\nimport add_edit_row_template from \"./templates/add_edit_row\";\nimport table_row_template from \"./templates/table_row\";\nimport placeholder_table_row_template from \"./templates/placeholder_row\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nconst { bogo_form_fields } = acfw_edit_coupon;\n\n/**\n * Trigger the add table row form event.\n *\n * @since 1.1.0\n */\nexport function trigger_add_table_row_form() {\n  const $button: JQuery = $(this),\n    $table: JQuery = $button.closest(\".acfw-styled-table\"),\n    $tbody: JQuery = $table.find(\"tbody\"),\n    is_deals: string = $table.data(\"isdeals\"),\n    type: string = $table.data(\"type\"),\n    exclude: number[] = $table.data(\"exclude\");\n\n  $tbody.find(\"tr.no-result\").remove();\n\n  $tbody.append(add_edit_row_template(type, exclude, is_deals));\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\n\n  $tbody.find(\"tr.add-edit-form select.enhanced\").trigger(\"focus\");\n}\n\n/**\n * Trigger the edit table row form event.\n *\n * @since 1.1.0\n */\nexport function trigger_edit_table_row_form() {\n  const $button: JQuery = jQuery(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $button.closest(\".acfw-styled-table\"),\n    $tbody: JQuery = $table.find(\"tbody\"),\n    is_deals: string = $table.data(\"isdeals\"),\n    type: string = $table.data(\"type\"),\n    data: any = $row.find(\".object\").data(type);\n\n  const { category_id, product_id } = data;\n  const exclude: number[] = $table.data(\"exclude\");\n  const object_id: number = type == \"category\" ? category_id : product_id;\n\n  exclude.splice(exclude.indexOf(object_id), 1);\n  $tbody.find(\"tr.no-result\").remove();\n  $row.replaceWith(add_edit_row_template(type, exclude, is_deals, data));\n  $table.data(\"exclude\", exclude);\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n  $(\"body\").trigger(\"wc-enhanced-select-init\");\n}\n\n/**\n * Trigger the cancel add/edit table row form event.\n *\n * @since 1.1.0\n */\nexport function cancel_add_edit_table_row() {\n  const $button: JQuery = $(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $button.closest(\"table\"),\n    $tbody: JQuery = $row.closest(\"tbody\"),\n    is_deals: string = $table.data(\"isdeals\"),\n    colspan: number = $row.find(\"td\").length,\n    type: string = $table.data(\"type\"),\n    data: any = $row.find(\"td.product\").data(\"object\");\n\n  const { category_id, product_id } = data;\n  const exclude: number[] = $table.data(\"exclude\");\n  const object_id = type == \"category\" ? category_id : product_id;\n\n  // don't proceed if product has already been added to the table.\n  // this happens when the same product/category has been added to a new row and trying to cancel the row that already has the same value.\n  if (exclude.includes(object_id)) {\n    vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\n    return;\n  }\n\n  if (typeof data == \"object\") {\n    exclude.push(object_id);\n    $row.replaceWith(table_row_template(data, type, is_deals));\n    $table.data(\"exclude\", exclude);\n    $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n  } else {\n    $row.remove();\n\n    if ($tbody.find(\"tr\").length <= 0)\n      $tbody.append(placeholder_table_row_template(colspan, type));\n  }\n}\n\n/**\n * Actual function that saves/edits the table row.\n *\n * @since 1.1.0\n */\nexport function add_edit_table_row() {\n  const $button: JQuery = $(this),\n    $row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $button.closest(\"table.acfw-styled-table\"),\n    is_deals: string = $table.data(\"isdeals\"),\n    type: string = $table.data(\"type\"),\n    $search: JQuery = $row.find(\".wc-product-search\"),\n    $quantity: JQuery = $row.find(\".condition-quantity\");\n\n  const exclude = $table.data(\"exclude\");\n\n  if (!$search.val() || !$quantity.val() || $quantity.val() < 1) {\n    vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\n    return;\n  }\n\n  // don't proceed if product has already been added to the table.\n  if (exclude.includes(parseInt($search.val().toString()))) {\n    vex.dialog.alert(acfw_edit_coupon.product_exists_in_table);\n    return;\n  }\n\n  // dont allow negative value for discount/price field.\n  if (is_deals) {\n    const discount_val = $row.find(\"input.discount_value\").val().toString();\n\n    // validate discount by type.\n    if (\n      !validateDiscount(\n        $row.find(\"select.discount_type\").val().toString(),\n        discount_val\n      )\n    ) {\n      vex.dialog.alert(acfw_edit_coupon.discount_type_value_error_msg);\n      return;\n    }\n\n    if (\n      price_to_float(discount_val) < 0 ||\n      isNaN(price_to_float(discount_val))\n    ) {\n      vex.dialog.alert(acfw_edit_coupon.fill_form_propery_error_msg);\n      return;\n    }\n  }\n\n  const data: any = get_table_row_data($row, type, is_deals);\n  const { category_id, product_id } = data;\n\n  exclude.push(type == \"category\" ? category_id : product_id);\n  $row.replaceWith(table_row_template(data, type, is_deals));\n  $table.data(\"exclude\", exclude);\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n  toggle_editing_mode(true);\n}\n\n/**\n * Remove product in table.\n *\n * @since 1.0.0\n */\nexport function product_table_remove_product() {\n  const $button: JQuery = $(this),\n    $object_row: JQuery = $button.closest(\"tr\"),\n    $table: JQuery = $object_row.closest(\"table\"),\n    $tbody: JQuery = $object_row.closest(\"tbody\"),\n    colspan: number = $object_row.find(\"td\").length,\n    type: string = $table.data(\"type\");\n\n  const data = $object_row.find(\"td.object\").data(type);\n  const exclude = $table.data(\"exclude\");\n  let index: number;\n\n  switch (type) {\n    case \"category\":\n      index = exclude.indexOf(parseInt(data.category_id));\n      break;\n\n    case \"product\":\n    default:\n      index = exclude.indexOf(parseInt(data.product_id));\n      break;\n  }\n\n  if (index !== -1) exclude.splice(index, 1);\n  $table.data(\"exclude\", exclude);\n  $table.find(\".wc-product-search\").data(\"exclude\", exclude);\n\n  $object_row.remove();\n\n  if ($tbody.find(\"tr\").length <= 0)\n    $tbody.append(placeholder_table_row_template(colspan, type));\n\n  toggle_editing_mode(true);\n}\n\n/**\n * Get table row data.\n *\n * @since 1.15\n *\n * @param $row\n * @param type\n * @param is_deals\n */\nfunction get_table_row_data($row: JQuery, type: string, is_deals: string): any {\n  let object: any = {};\n\n  if (type == \"category\") {\n    object = {\n      category_id: parseInt($row.find(\".wc-product-search\").val() + \"\"),\n      quantity: parseInt($row.find(\".condition-quantity\").val() + \"\"),\n      category_label: $row.find(\".wc-product-search option:selected\").text(),\n    };\n  } else {\n    object = {\n      product_id: parseInt($row.find(\".wc-product-search\").val() + \"\"),\n      quantity: parseInt($row.find(\".condition-quantity\").val() + \"\"),\n      product_label: $row.find(\".wc-product-search option:selected\").text(),\n    };\n  }\n\n  if (is_deals) {\n    object.discount_type = $row.find(\"select.discount_type\").val();\n    object.discount_value = $row.find(\"input.discount_value\").val().toString();\n  }\n\n  return object;\n}\n","import { remove_leading_zeros } from \"../helper\";\nimport {\n  toggle_editing_mode,\n  toggle_block_data_type,\n  forceApplyToSameProductForEachProductBase,\n} from \"./toggles\";\nimport {\n  save_bogo_deals,\n  clear_bogo_deals,\n  update_combined_products_list,\n  update_any_products_trigger_data,\n  update_any_products_apply_data,\n  save_on_coupon_publish,\n} from \"./save\";\nimport {\n  trigger_add_table_row_form,\n  trigger_edit_table_row_form,\n  cancel_add_edit_table_row,\n  add_edit_table_row,\n  product_table_remove_product,\n} from \"./table\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $: any = jQuery;\nconst module_block: HTMLElement = document.querySelector(\"#acfw_bogo_deals\");\n\n/**\n * Export functions to be accessed by ACFWP.\n */\nacfw_edit_coupon = {\n  ...acfw_edit_coupon,\n  bogo_toggle_editing_mode: toggle_editing_mode,\n};\n\n/**\n * Add free products module events script.\n *\n * @since 1.0.0\n */\nexport default function bogo_deals_module_events(): void {\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table tfoot .add-table-row\",\n    trigger_add_table_row_form\n  );\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table td.actions a.edit\",\n    trigger_edit_table_row_form\n  );\n  $(module_block).on(\n    \"click\",\n    \"tr.add-edit-form .actions .cancel\",\n    cancel_add_edit_table_row\n  );\n  $(module_block).on(\n    \"click\",\n    \"tr.add-edit-form .actions .condition-product-add\",\n    add_edit_table_row\n  );\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table td.actions a.remove\",\n    product_table_remove_product\n  );\n  $(module_block).on(\"click\", \"button#save-bogo-deals\", save_bogo_deals);\n  $(module_block).on(\"click\", \"button#clear-bogo-deals\", clear_bogo_deals);\n  $(module_block).on(\n    \"change acfw_load\",\n    \"select#bogo-condition-type,select#bogo-deals-type\",\n    toggle_block_data_type\n  );\n  $(module_block).on(\n    \"change acfw_fetch_data\",\n    \".combined-products-form select,.combined-products-form input\",\n    update_combined_products_list\n  );\n  $(module_block).on(\n    \"change acfw_fetch_data\",\n    \".any-products-trigger-form input\",\n    update_any_products_trigger_data\n  );\n  $(module_block).on(\n    \"change acfw_fetch_data\",\n    \".any-products-apply-form input,.any-products-apply-form select\",\n    update_any_products_apply_data\n  );\n  $(module_block).on(\"change\", \".condition-quantity\", restrict_quantity_value);\n  $(module_block).on(\"blur\", \".wc_input_price\", remove_leading_zeros);\n  $(module_block).css(\"min-height\", $(\"#coupon_options\").height());\n  $(module_block).on(\"change\", \"input[name='bogo_type']\", trigger_toggle);\n  $(module_block).on(\n    \"click\",\n    \".acfw-styled-table .actions .remove\",\n    trigger_toggle\n  );\n  $(module_block)\n    .find(\".notice-option\")\n    .on(\"change\", \"input,textarea,select\", trigger_toggle);\n  $(\"form#post\").on(\"submit\", save_on_coupon_publish);\n\n  $(module_block)\n    .find(\"select#bogo-condition-type,select#bogo-deals-type\")\n    .trigger(\"acfw_load\");\n\n  $(\"#woocommerce-coupon-data\").on(\n    \"change acfw_load\",\n    \"select#discount_type\",\n    toggleBogoInterface\n  );\n\n  $(\"#woocommerce-coupon-data select#discount_type\").trigger(\"acfw_load\");\n}\n\nfunction toggleBogoInterface() {\n  const $discountType = $(this);\n  const $general = $discountType.closest(\"#general_coupon_data\");\n  const $inputs = $general.find(\"p.form-field input\");\n\n  if (\"acfw_bogo\" === $discountType.val()) {\n    $general.addClass(\"acfw-bogo-type\");\n    $(\"#acfw_bogo_deals\").show();\n\n    // disable fields under general tab that cannot be used in conjunction with BOGO\n    for (let x = 0; x <= $inputs.length; x++) {\n      if (\n        ![\n          \"expiry_date\",\n          \"_acfw_coupon_sort_priority\",\n          \"coupon_amount\", // we don't disable the coupon_amount field as it will trigger a PHP notice log in WC\n        ].includes($($inputs[x]).prop(\"name\"))\n      ) {\n        $($inputs[x]).prop(\"disabled\", true);\n      }\n    }\n  } else {\n    $general.removeClass(\"acfw-bogo-type\");\n    $(\"#acfw_bogo_deals\").hide();\n\n    // reenable fields under general tab when discount type is not BOGO anymore\n    for (let x = 0; x <= $inputs.length; x++) {\n      if (\n        ![\n          \"expiry_date\",\n          \"_acfw_coupon_sort_priority\",\n          \"coupon_amount\",\n        ].includes($($inputs[x]).prop(\"name\"))\n      ) {\n        $($inputs[x]).prop(\"disabled\", false);\n      }\n    }\n  }\n}\n\n/**\n * Trigger toggle editing mode.\n *\n * @since 1.0.0\n */\nfunction trigger_toggle(): void {\n  toggle_editing_mode(true);\n}\n\n/**\n * Restrict condition quantity value.\n *\n * @since 1.0.0\n */\nfunction restrict_quantity_value() {\n  const $field: JQuery = jQuery(this);\n\n  if ($field.val() < 1) $field.val(1);\n}\n","declare var jQuery: any;\nvar $: any = jQuery;\n\n/**\n * Toggle field events script.\n * Used by Roles Restriction and other similar modules.\n *\n * @since 1.0.0\n */\nexport default function toggle_fields_events() {\n  const $module_block: JQuery = $(\".toggle-enable-fields\");\n\n  $module_block.on(\n    \"change\",\n    \".toggle-trigger-field\",\n    toggle_disable_enable_fields\n  );\n  $module_block.find(\".toggle-trigger-field\").trigger(\"change\");\n}\n\n/**\n * Toggle disable/enable fields.\n *\n * @since 1.0.0\n */\nfunction toggle_disable_enable_fields() {\n  const $button: JQuery = $(this),\n    $module_block: JQuery = $button.closest(\".toggle-enable-fields\"),\n    $fields: JQuery = $module_block.find(\n      \"select,textarea,input:not(.toggle-trigger-field)\"\n    ),\n    toggle: boolean = !$button.prop(\"checked\");\n\n  $fields.prop(\"disabled\", toggle);\n\n  if (toggle) $fields.closest(\".form-field\").addClass(\"disabled\");\n  else $fields.closest(\".form-field\").removeClass(\"disabled\");\n}\n","declare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\ndeclare var vex: any;\n\nconst $: any = jQuery;\nlet exludeCouponShown = false;\n\n/**\n * Add upsell events script.\n *\n * @since 1.0.0\n */\nexport default function upsell_events() {\n  $(\"#usage_limit_coupon_data\").on(\n    \"change\",\n    \"#reset_usage_limit_period\",\n    upsell_advance_usage_limits\n  );\n  $(\"#usage_restriction_coupon_data .exclude_coupon_ids_field\").on(\n    \"click change focus\",\n    \"input,select\",\n    upsell_exclude_coupons_restriction\n  );\n  $(\"#acfw-auto-apply-coupon\").on(\n    \"change\",\n    \"#acfw_auto_apply_coupon_field\",\n    upsell_auto_apply\n  );\n  $(\"#acfw_cart_conditions\").on(\n    \"change\",\n    \".condition-types\",\n    cart_condition_select_notice\n  );\n  $(\"#woocommerce-coupon-data\").on(\n    \"change acfw_load\",\n    \"#discount_type\",\n    hideGeneralUpsellOnBogo\n  );\n\n  $(\"#woocommerce-coupon-data #discount_type\").trigger(\"acfw_load\");\n}\n\n/**\n * Usage limits upsell vex dialog.\n *\n * @since 1.1\n */\nfunction upsell_advance_usage_limits() {\n  const { usage_limits } = acfw_edit_coupon.upsell;\n\n  vex.dialog.alert({\n    unsafeMessage: `<div class=\"upsell-alert usage-limits\">${usage_limits}</div>`,\n  });\n  $(this).val(\"none\");\n}\n\n/**\n * Usage restriction for exclude coupons upsell vex dialog.\n *\n * @since 1.1\n */\nfunction upsell_exclude_coupons_restriction() {\n  // prevent duplicate dialogs showing up.\n  if (exludeCouponShown) return;\n  exludeCouponShown = true;\n\n  const { usage_restriction } = acfw_edit_coupon.upsell;\n\n  vex.dialog.alert({\n    unsafeMessage: `<div class=\"upsell-alert exclude-coupon\">${usage_restriction}</div>`,\n    afterClose: () => (exludeCouponShown = false),\n  });\n  $(this).val(\"\");\n}\n\n/**\n * Auto apply upsell vex dialog.\n *\n * @since 1.1\n */\nfunction upsell_auto_apply() {\n  const { auto_apply } = acfw_edit_coupon.upsell;\n\n  vex.dialog.alert({\n    unsafeMessage: `<div class=\"upsell-alert auto-apply\">${auto_apply}</div>`,\n  });\n  $(this).prop(\"checked\", false);\n}\n\n/**\n * Display did you know notice below cart condition selector when premium option is selected.\n *\n * @since 1.6\n */\nfunction cart_condition_select_notice() {\n  const $select = $(this);\n  const $moduleBlock = $select.closest(\"#acfw_cart_conditions\");\n  const $formBlock = $select.closest(\".add-condition-form\");\n  const premiumConditions: string[] = $moduleBlock.data(\"premium-conditions\");\n  const $noticeHolder = $moduleBlock.find(\".acfw-dyk-notice-holder\");\n\n  let $noticeBlock = $formBlock.find(\".acfw-dyk-notice\");\n\n  if (!$noticeBlock.length) {\n    $formBlock.append($noticeHolder.html());\n    $noticeBlock = $formBlock.find(\".acfw-dyk-notice\");\n  }\n\n  if ($.inArray($select.val(), premiumConditions) >= 0) {\n    $noticeBlock.show();\n  } else {\n    $noticeBlock.hide();\n  }\n}\n\n/**\n * Hide did you know notice upsell under general tab when BOGO discount type is selected.\n *\n * @since 3.0\n */\nfunction hideGeneralUpsellOnBogo() {\n  const type = $(this).val();\n\n  if (\"acfw_bogo\" === type) {\n    $(\"p.acfw-dyk-notice-general\").hide();\n  } else {\n    $(\"p.acfw-dyk-notice-general\").show();\n  }\n}\n","import searchWidgetTemplate, { ISearchArgs } from \"./search_widget_template\";\n\ndeclare var acfw_edit_coupon: any;\n\nexport interface ILinksListArguments {\n  title: string;\n  className: string;\n  links: ILink[];\n  search?: ISearchArgs;\n}\n\nexport interface ILink {\n  title: string;\n  url: string;\n  freeOnly?: boolean;\n  premiumUrl?: string;\n}\n\n/**\n * Links list template markup.\n *\n * @since 1.5\n *\n * @param {ILinksListArguments} args\n */\nexport default function linksListTemplate(args: ILinksListArguments) {\n  const { title, className } = args;\n  let { links } = args;\n  const { is_premium } = acfw_edit_coupon.help_modal;\n\n  if (is_premium) {\n    links = links.filter(\n      (l: ILink) => l?.freeOnly === undefined || !l?.freeOnly\n    );\n  }\n\n  return `\n    <div class=\"links-list ${className}\">\n      <h3>${title}</h3>\n\n      ${args?.search ? searchWidgetTemplate(args?.search) : \"\"}\n\n      <ul>\n        ${links.map((link) => `<li>${generateLink(link)}</li>`).join(\"\")}\n      </ul>\n    </div>\n  `;\n}\n\n/**\n * Generate link <a> markup.\n *\n * @since 1.5\n *\n * @param {ILink} link\n */\nfunction generateLink(link: ILink) {\n  const { title, url } = link;\n  const { is_premium } = acfw_edit_coupon.help_modal;\n\n  return `<a href=\"${\n    is_premium && link?.premiumUrl ? link?.premiumUrl : url\n  }\">${title}</a>`;\n}\n","declare var acfw_edit_coupon: any;\n\nexport interface ISearchArgs {\n  slug: string;\n  action: string;\n  placeholder: string;\n}\n\nexport interface ISearchResult {\n  url: string;\n  title: String;\n}\n\n/**\n * Search widget template.\n *\n * @param {ISearchArgs} search\n * @returns\n */\nexport default function searchWidgetTemplate(search: ISearchArgs) {\n  const { slug, action, placeholder } = search;\n\n  return `\n    <div class=\"search-widget search-${slug}\">\n      <input class=\"search-input\" type=\"text\" placeholder=\"${placeholder}\" data-action=\"${action}\" />\n      <button type=\"button\" class=\"clear-search dashicons-before dashicons-no-alt\"></button>\n      <div class=\"search-results\"></div>\n    </div>\n  `;\n}\n\n/**\n * Search results template.\n *\n * @param {ISearchResult[]} results\n * @param {string} term\n * @returns\n */\nexport function searchResultsTemplate(results: ISearchResult[], term: string) {\n  const list: string = results\n    .map(\n      ({ url, title }) =>\n        `<li><a href=\"${generateUrl(\n          url,\n          term\n        )}\" rel=\"noopener noreferrer nofollow\" target=\"_blank\">${title}</a></li>`\n    )\n    .join(\"\");\n\n  return `<ul>${list}</ul>`;\n}\n\n/**\n * Add UTM parameters to KB article URL.\n *\n * @param {string} url\n * @param {string} term\n * @returns\n */\nfunction generateUrl(url: string, term: string) {\n  return `${url}?utm_source=acfwf&utm_medium=help_modal&utm_campaign=kb_search&utm_term=${term}`;\n}\n","import linksListTemplate, { ILink } from \"./links_list_template\";\nimport { ISearchArgs } from \"./search_widget_template\";\n\ndeclare var acfw_edit_coupon: any;\n\ninterface IHelpMainContent {\n  title: string;\n  content: string;\n  videos: ILink[];\n}\n\ninterface IHelpAsideContent {\n  links: ILink[];\n  kbs: ILink[];\n  tutorials: ILink[];\n}\n\nexport interface IHelpModalArguments {\n  target: string;\n  left: IHelpMainContent;\n  right: IHelpAsideContent;\n}\n\n/**\n * Help modal template markup.\n *\n * @since 1.5\n *\n * @param {IHelpModalArguments} args\n */\nexport default function modalTemplate(args: IHelpModalArguments) {\n  const { labels, images_url, is_premium } = acfw_edit_coupon.help_modal;\n  const {\n    target,\n    left: { title, content, videos },\n    right: { links, kbs, tutorials },\n  } = args;\n  const kbSearchArgs: ISearchArgs = {\n    slug: \"kb-articles\",\n    action: \"acfw_search_help_kb_articles\",\n    placeholder: labels.search_placeholder,\n  };\n  const source = is_premium ? \"acfwp\" : \"acfwf\";\n  const upgradeLink = `https://advancedcouponsplugin.com/pricing/?utm_source=acfwf&utm_medium=help_modal&utm_campaign=help_modal_${target}_upgrade_link`;\n  const logoUrl = `https://advancedcouponsplugin.com/?utm_source=${source}&utm_medium=help_modal&utm_campaign=help_brand_link_${target}`;\n\n  return `\n    <div class=\"header\">\n      <div class=\"logo\">\n        <a href=\"${logoUrl}\" target=\"_blank\"><img src=\"${images_url}acfw-logo.png\" alt=\"Advanced Coupons logo\" /></a>\n      </div>\n      ${\n        !is_premium\n          ? `\n        <div class=\"upgrade-link\">\n          <a href=\"${upgradeLink}\" target=\"_blank\">\n            <span>${labels.upgrade_to_premium}</span>\n            <i class=\"dashicons dashicons-external\"></i>\n          </a>\n        </div>\n      `\n          : \"\"\n      }\n    </div>\n    <main>\n      <h1 class=\"title\">${title}</h1>\n      <div class=\"content\">\n        ${content}\n      </div>\n      ${\n        videos.length\n          ? `<div class=\"video-gallery-placeholder\"><img src=\"${images_url}spinner-2x.gif\" alt=\"Loading videos\" /><p>${labels.loading_videos}</p></div>`\n          : \"\"\n      }\n    </main>\n    <aside>\n      ${linksListTemplate({\n        title: labels.rel_links,\n        className: \"relevant-links\",\n        links: links,\n      })}\n      ${linksListTemplate({\n        title: labels.kb_articles,\n        className: \"knowledge-base-articles\",\n        links: kbs,\n        search: kbSearchArgs,\n      })}\n      ${linksListTemplate({\n        title: labels.tut_guides,\n        className: \"tutorials-guides\",\n        links: tutorials,\n      })}\n    </aside>\n  `;\n}\n","declare var acfw_edit_coupon: any;\n\nexport default function permissionRequestTemplate(module: string) {\n  const { images_url } = acfw_edit_coupon.help_modal;\n  const {\n    permission_request,\n    allow,\n    cancel,\n  } = acfw_edit_coupon.help_modal.labels;\n  return `\n  <div id=\"acfw-help-modal-permission-request\" data-module=\"${module}\">\n    <img src=\"${images_url}acfw-logo.png\" />\n    <p>${permission_request}</p>\n    <p class=\"actions\">\n      <button class=\"button-primary allow\" type=\"button\">${allow}</button>\n      <button class=\"button cancel\" type=\"button\">${cancel}</button>\n    </p>\n  </div>\n  `;\n}\n","declare var acfw_edit_coupon: any;\n\nexport default function placeholderTemplate() {\n  const { images_url, labels } = acfw_edit_coupon.help_modal;\n\n  return `<div id=\"acfw-help-modal-placeholder\">\n    <img src=\"${images_url}spinner-2x.gif\" />\n    <p>${labels.loading_content}</p>\n  </div>`;\n}\n","declare var acfw_edit_coupon: any;\n\nexport interface IVideoEmbed {\n  url: string;\n  videoid: string;\n  embed: string;\n  thumbnail: string;\n  title?: string;\n}\n\n/**\n * Video gallery template.\n *\n * @param {IVideoEmbed[]} videoEmbeds\n * @returns\n */\nexport default function videoGalleryTemplate(videoEmbeds: IVideoEmbed[]) {\n  return `\n  <div class=\"acfw-help-video-gallery\">\n    <div class=\"videos\">\n      ${\n        videoEmbeds[0].embed\n          ? videoEmbeds[0].embed\n          : noVideoTemplate(videoEmbeds[0])\n      }\n    </div>\n    ${\n      videoEmbeds.length > 1\n        ? `\n      <ul class=\"thumbnails\">\n        ${videoEmbeds\n          .map(\n            (ve, i) => `\n            <li ${i === 0 ? `class=\"active\"` : \"\"}>\n              <a href=\"javascript:void(0);\" data-videoid=\"${ve.videoid}\">\n                <img src=\"${ve.thumbnail}\" title=\"${ve.title}\" />\n              </a>\n              <span class=\"title\">${ve.title}</span>\n            </li>\n            `\n          )\n          .join(\"\")}\n      </ul>\n      `\n        : \"\"\n    }\n    \n  </div>\n  `;\n}\n\nexport function noVideoTemplate(videoEmbed: IVideoEmbed) {\n  return `\n  <div class=\"no-video\" style=\"background-image:url(${videoEmbed.thumbnail});\">\n    <a href=\"${videoEmbed.url}\" rel=\"noreferer noopener\" >\n      <span>${acfw_edit_coupon.help_modal.labels.no_video}</span>\n    </a>\n  </div>\n  `;\n}\n","import videoGalleryTemplate, {\n  noVideoTemplate,\n  IVideoEmbed,\n} from \"./templates/video_gallery_template\";\n\ndeclare var ajaxurl: string;\ndeclare var acfw_edit_coupon: any;\n\nconst $ = jQuery;\nlet videoEmbedsState: IVideoEmbed[] = [];\nlet videoModuleState: string = \"\";\n\nexport interface IHelpVideo {\n  title: string;\n  url: string;\n  embed?: string;\n}\n\n/**\n * Fetch Videos oembed markups via AJAX and update video gallery content.\n *\n * @since 1.5\n *\n * @param {IHelpVideo[]} videos\n * @returns\n */\nexport default function loadVideosOembed(videos: IHelpVideo[], module: string) {\n  const { _secure_nonce } = acfw_edit_coupon.help_modal;\n\n  // skip if there are no videos to load.\n  if (!videos.length) return;\n\n  $.post(\n    ajaxurl,\n    {\n      action: \"acfw_get_help_videos_oembed\",\n      urls: videos.map((v) => v.url),\n      width: $(\".acfw-help-vex .vex-content main\").width(),\n      _nonce: _secure_nonce,\n    },\n    (videoEmbeds: IVideoEmbed[]) => {\n      // map video title to embeds data.\n      videoEmbeds = videoEmbeds.map((ve) => {\n        const index = videos.findIndex((v) => v.url === ve.url);\n        ve.title = index >= 0 ? videos[index].title : \"\";\n        return ve;\n      });\n\n      // update state variable for video embeds.\n      videoEmbedsState = videoEmbeds;\n      videoModuleState = module;\n\n      updateVideoGalleryContent(videoEmbeds);\n    },\n    \"json\"\n  );\n}\n\n/**\n * Load video gallery content from cached data if present.\n *\n * @since 1.5\n *\n * @param {IHelpVideo[]} videos\n * @returns\n */\nexport function loadVideoGalleryContentCache(\n  videos: IHelpVideo[],\n  module: string\n) {\n  if (!videoEmbedsState.length || module !== videoModuleState) {\n    loadVideosOembed(videos, module);\n    return;\n  }\n\n  updateVideoGalleryContent(videoEmbedsState);\n}\n\n/**\n * Update video gallery content markup.\n *\n * @since 1.5\n *\n * @param {IVideoEmbed[]} videoEmbeds\n */\nfunction updateVideoGalleryContent(videoEmbeds: IVideoEmbed[]) {\n  const $placeholder = $(\".acfw-help-vex .video-gallery-placeholder\");\n\n  // replace placeholder with video gallery markup.\n  if ($placeholder.length) {\n    $placeholder.replaceWith(videoGalleryTemplate(videoEmbeds));\n  }\n}\n\n/**\n * Switch active video displayed when thumbnail is clicked and autoplay video.\n *\n * @since 1.5\n */\nexport function switchActiveVideo() {\n  const $this = jQuery(this);\n  const $li = $this.closest(\"li\");\n  const $wrap = $this.closest(\".acfw-help-video-gallery\");\n  const $video = $wrap.find(\".videos\");\n  const $thumbs = $wrap.find(\"ul.thumbnails li\");\n  const videoId = $this.data(\"videoid\");\n\n  // skip if thumbnail is for current active video.\n  if ($li.hasClass(\"active\")) {\n    return;\n  }\n\n  // switch active class to clicked thumbnail.\n  $thumbs.removeClass(\"active\");\n  $li.addClass(\"active\");\n\n  // search index of video ombed markup of matching video ID.\n  const index = videoEmbedsState.findIndex((ve) => ve.videoid === videoId);\n\n  // replace main video oembed markup.\n  if (index >= 0) {\n    $video.html(\n      videoEmbedsState[index].embed\n        ? videoEmbedsState[index].embed.replace(\"oembed\", \"oembed&autoplay=1\")\n        : noVideoTemplate(videoEmbedsState[index])\n    );\n  }\n}\n","import modalTemplate, { IHelpModalArguments } from \"./templates/modal_template\";\nimport errorTemplate from \"./templates/error_template\";\nimport permissionRequestTemplate from \"./templates/permission_template\";\nimport placeholderTemplate from \"./templates/placeholder_template\";\nimport loadVideosOembed, { loadVideoGalleryContentCache } from \"./videos\";\n\ndeclare var ajaxurl: string;\ndeclare var jQuery: any;\ndeclare var vex: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $ = jQuery;\nconst dataCache: IHelpModalArguments[] = []; // state variable that holds cached data.\n\n/**\n * Show the help modal content.\n *\n * @since 1.5\n */\nexport function showHelpModal() {\n  const { allow_fetch } = acfw_edit_coupon.help_modal;\n  const $this = $(this);\n  const module = $this.closest(\".acfw-help-link\").data(\"module\");\n\n  // display vex dialog with placeholder div and spinner.\n  vex.dialog.open({\n    unsafeMessage: `\n      <a class=\"vex-close\" href=\"javascript:void(0);\"></a>\n      ${allow_fetch ? placeholderTemplate() : permissionRequestTemplate(module)}\n    `,\n    className: \"vex-theme-plain acfw-help-vex\",\n    showCloseButton: false,\n    buttons: {},\n  });\n\n  // fetch data and update modal content.\n  if (allow_fetch) fetchContentDataUpdateModal(module);\n}\n\n/**\n * Replace content in vex modal.\n * make sure placeholder still exists before replacing it with relative content.\n *\n * @param {string} markupTemplate\n */\nfunction replaceModalContent(markupTemplate: string) {\n  const $placeholder = $(\"#acfw-help-modal-placeholder\");\n  if ($placeholder.length) {\n    $placeholder.replaceWith(markupTemplate);\n    $(\".acfw-help-vex\")\n      .find(\"main a,aside a\")\n      .attr(\"target\", \"_blank\")\n      .attr(\"rel\", \"noopener noreferrer nofollow\");\n  }\n}\n\n/**\n * Fetch content data from JSON url and update modal content.\n *\n * @since 1.5\n *\n * @param {string} module\n */\nexport function fetchContentDataUpdateModal(module: string) {\n  const { _secure_nonce } = acfw_edit_coupon.help_modal;\n  let cachedData: IHelpModalArguments | null = null;\n\n  // serve cached data and videos embeds for module if already present.\n  if ((cachedData = getCachedData(module))) {\n    replaceModalContent(modalTemplate(cachedData));\n    loadVideoGalleryContentCache(cachedData.left.videos, module);\n    return;\n  }\n\n  $.post(\n    ajaxurl,\n    {\n      action: \"acfw_fetch_help_data\",\n      module: module,\n      _nonce: _secure_nonce,\n    },\n    (data: IHelpModalArguments) => {\n      dataCache.push(data);\n      replaceModalContent(modalTemplate(data));\n      loadVideosOembed(data.left.videos, module);\n    },\n    \"json\"\n  ).fail((data: any) => {\n    replaceModalContent(errorTemplate(data.responseJSON));\n  });\n}\n\n/**\n * Get cached data for module.\n *\n * @since 1.5\n *\n * @param {string} module\n */\nfunction getCachedData(module: string) {\n  const index = dataCache.findIndex(\n    (data: IHelpModalArguments) => data.target === module\n  );\n\n  return index >= 0 ? dataCache[index] : null;\n}\n","interface IErrorTemplateArguments {\n  errorMsg: string;\n}\n\nexport default function errorTemplate(response: IErrorTemplateArguments) {\n  const { errorMsg } = response;\n  return `\n    <div class=\"acfw-help-modal-error\">\n      <p>${errorMsg}</p>\n    </div>\n  `;\n}\n","import {\n  searchResultsTemplate,\n  ISearchResult,\n  ISearchArgs,\n} from \"./templates/search_widget_template\";\n\ndeclare var ajaxurl: string;\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\ninterface ISearchQueryArgs {\n  action: string;\n  term: string;\n  _nonce: string;\n}\n\ninterface ISearchResultsCache {\n  term: string;\n  results: ISearchResult[];\n}\n\nconst $ = jQuery;\nlet searchTimeoutState: any = null;\nlet searchResultsCache: ISearchResultsCache | null = null;\n\n/**\n * Trigger search event when on keyboard input.\n *\n * @since 1.5\n */\nexport function triggerSearchEvent() {\n  const $button = $(this);\n  const $wrap = $button.closest(\".search-widget\");\n  const $input = $wrap.find(\"input.search-input\");\n  const $results = $wrap.find(\".search-results\");\n  const { labels, images_url, _secure_nonce } = acfw_edit_coupon.help_modal;\n  const term = $input.val();\n\n  // if search input is emptied, clear state and remove results.\n  if (!term) {\n    clearTimeout(searchTimeoutState);\n    searchTimeoutState = null;\n    $results.height(0).html(\"\");\n    $wrap.removeClass(\"show-clear\");\n    return;\n  }\n\n  $wrap.addClass(\"show-clear\");\n\n  // run search query.\n  doSearchQuery(\n    {\n      action: $input.data(\"action\"),\n      term: $input.val(),\n      _nonce: _secure_nonce,\n    },\n\n    // callback to run before running ajax.\n    () => {\n      $results\n        .height(35)\n        .html(\n          `<div class=\"loading\"><img src=\"${images_url}spinner.gif\" /></div>`\n        );\n    },\n\n    // callback to run to process results.\n    (data: ISearchResult[]) => {\n      if (!$wrap.hasClass(\"show-clear\")) {\n        return;\n      }\n\n      if (data.length) {\n        searchResultsCache = { term, results: data };\n        $results.html(searchResultsTemplate(data, term));\n      } else {\n        $results.html(\n          `<div class=\"no-result\">${labels.search_no_results}</div>`\n        );\n      }\n\n      // adjust the height to match the content (css transform).\n      $results.height($results.find(\"ul,.no-result\").height() + 3);\n    }\n  );\n}\n\n/**\n * Function that handles the search query scheduling (delay 1 second after no more keyboard inputs).\n *\n * @since 1.5\n *\n * @param {ISearchArgs} args\n * @param {CallableFunction} beforeCB\n * @param {CallableFunction} successCB\n */\nfunction doSearchQuery(\n  args: ISearchQueryArgs,\n  beforeCB: CallableFunction,\n  successCB: CallableFunction\n) {\n  // clear saved timeout everytime search term value is changed.\n  if (searchTimeoutState) {\n    clearTimeout(searchTimeoutState);\n    searchTimeoutState = null;\n  }\n\n  // if search term is the same from previous, then serve cached results.\n  if (args.term === searchResultsCache?.term) {\n    successCB(searchResultsCache.results);\n    return;\n  }\n\n  // schedule AJAX query after 1 second.\n  searchTimeoutState = setTimeout(() => {\n    beforeCB();\n    $.post(ajaxurl, args, successCB, \"json\");\n  }, 1000);\n}\n\n/**\n * Clear the search text and hide results list.\n *\n * @since 1.5\n */\nexport function clearSearchEvent() {\n  const $button = $(this);\n  const $wrap = $button.closest(\".search-widget\");\n  const $input = $wrap.find(\"input.search-input\");\n  const $results = $wrap.find(\".search-results\");\n\n  clearTimeout(searchTimeoutState);\n  searchTimeoutState = null;\n  $input.val(\"\");\n  $results.height(0).html(\"\");\n  $wrap.removeClass(\"show-clear\");\n}\n","import { fetchContentDataUpdateModal } from \"./modal\";\nimport placeholderTemplate from \"./templates/placeholder_template\";\n\ndeclare var ajaxurl: any;\ndeclare var jQuery: any;\ndeclare var vex: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $ = jQuery;\n\nexport function allowFetchPermission() {\n  const { _secure_nonce } = acfw_edit_coupon.help_modal;\n  const $button = jQuery(this);\n  const $div = $button.closest(\"#acfw-help-modal-permission-request\");\n  const module = $div.data(\"module\");\n\n  $div.replaceWith(placeholderTemplate());\n\n  $.post(\n    ajaxurl,\n    {\n      action: \"acfw_save_fetch_help_permission\",\n      _nonce: _secure_nonce,\n    },\n    () => {\n      fetchContentDataUpdateModal(module);\n      acfw_edit_coupon.help_modal.allow_fetch = true;\n    },\n    \"json\"\n  );\n}\n\nexport function closePermisionModal() {\n  vex.closeAll();\n}\n","import { showHelpModal } from \"./modal\";\nimport { switchActiveVideo } from \"./videos\";\nimport { triggerSearchEvent, clearSearchEvent } from \"./search\";\nimport { allowFetchPermission, closePermisionModal } from \"./permission\";\n\ndeclare var jQuery: any;\ndeclare var vex: any;\ndeclare var acfw_edit_coupon: any;\n\nconst $: any = jQuery;\n\n/**\n * Register events related to help modal.\n *\n * @since 1.5\n */\nexport default function helpLinkRegisterEvents() {\n  $(\"#post-body\").on(\"click\", \".acfw-help-modal-trigger\", showHelpModal);\n  $(\"body\").on(\"click\", \".acfw-help-vex .vex-close\", () => vex.closeAll());\n  $(\"body\").on(\n    \"click\",\n    \".acfw-help-vex .acfw-help-video-gallery ul.thumbnails li a\",\n    switchActiveVideo\n  );\n  $(\"body\").on(\n    \"keyup\",\n    \".acfw-help-vex .search-widget input.search-input\",\n    triggerSearchEvent\n  );\n\n  $(\"body\").on(\n    \"click\",\n    \".acfw-help-vex .search-widget button.clear-search\",\n    clearSearchEvent\n  );\n\n  $(\"body\").on(\n    \"click\",\n    \".acfw-help-vex #acfw-help-modal-permission-request button.allow\",\n    allowFetchPermission\n  );\n\n  $(\"body\").on(\n    \"click\",\n    \".acfw-help-vex #acfw-help-modal-permission-request button.cancel\",\n    closePermisionModal\n  );\n}\n\n/**\n * Generate help links in the tabs.\n *\n * @since 1.5\n */\nexport function generateHelpLinks() {\n  const helpLinkDivs: NodeList = document.querySelectorAll(\n    \"#post-body .acfw-help-link\"\n  );\n  const { help_text, images_url } = acfw_edit_coupon.help_modal;\n\n  helpLinkDivs.forEach((div: HTMLElement) => {\n    const markup = `\n      <a class=\"acfw-help-modal-trigger\" href=\"javascript:void(0);\">${help_text} \n        <img class=\"acfw-icon\" src=\"${images_url}help-icon.svg\" alt=\"${help_text}\" />\n      </a>\n    `;\n\n    $(div).html(markup);\n  });\n}\n","import cart_conditions_module_events from \"./cart_conditions/index\";\nimport bogo_deals_module_events from \"./bogo_deals/index\";\nimport toggle_fields_events from \"./toggle_fields\";\nimport upsell_events from \"./upsell\";\nimport helpLinkRegisterEvents, { generateHelpLinks } from \"./help_modal/index\";\n\nimport \"./assets/styles/index.scss\";\n\ndeclare var jQuery: any;\ndeclare var acfw_edit_coupon: any;\n\nconst { modules, upsell } = acfw_edit_coupon;\n\njQuery(document).ready(($: any) => {\n  if (modules.indexOf(\"acfw_cart_conditions_module\") > -1)\n    cart_conditions_module_events();\n\n  if (modules.indexOf(\"acfw_bogo_deals_module\") > -1)\n    bogo_deals_module_events();\n\n  if (upsell) upsell_events();\n\n  toggle_fields_events();\n\n  generateHelpLinks();\n  helpLinkRegisterEvents();\n});\n"],"names":["conditionFieldOptionsTemplate","cart_condition_fields","acfw_edit_coupon","fieldGroups","btnLabels","add_new_and_rule","conditionFields","Object","keys","map","key","f","fieldGroup","group","label","matchedFields","filter","c","undefined","length","title","join","conditionFieldGroupTemplate","add","cancel","$","jQuery","module_block","document","querySelector","toggle_add_condition_form","$button","this","$condition_actions","closest","hasClass","find","show","select2","hide","toggle_editing_mode","toggle","data","prop","popuplate_taxonomy_term_options","$taxonomy","$condition_block","$tax_terms","taxonomy","val","terms","taxonomy_data","t","slug","taxonomy_terms","remove","term","term_id","optionObj","Option","append","trigger","popuplate_shipping_region_options","$shipping_zone","$shipping_region","zone_id","regions","region_labels","region_options","code","toggle_overlay","overlay","type","display","css","esc_attr","text","replace","m","remove_leading_zeros","decimal_separator","$input","value","substring","get_allowed_minimum_value","condition","selected","value_1","value_2","selected_multiple","array","indexOf","condition_options","condition_field_options","exactly","anyexcept","morethan","lessthan","price_to_float","price","parseFloat","validateDiscount","condition_logic_template","logic_field_options","and","or","condition_group_template","fields_markup","empty_cart_conditions_field","add_condition_group","condition_groups","blur","removeClass","remove_condition_group","$condition_group","$cgroup_logic","index","next","prev","no_condition_group_msg","logic_template","product_category_template","categories","quantity","product_category","placeholder","field","quantityLabel","cart_quantity","condition_label","condOption","options","markup","x","category_options","customer_logged_in_status_template","customer_logged_in_status","get_options","customer_user_role_template","customer_user_role","user_role_options","disallowed_customer_user_role_template","disallowed_customer_user_role","premium_cart_condition_fields","upsell","add_condition_field","$condition_type","$condition_fields","condition_type","fields_count","vex","dialog","alert","unsafeMessage","cart_condition_field","condition_field_markup","get_condition_field","fail_add_condition_field","remove_condition_field","$condition_field","$cfield_logic","desc","cart_quantity_template","cart_subtotal","cart_subtotal_template","field_key","template_callback","default_data_value","is_condition_field","cart_conditon_field_options","scrape_condition_group_data","condition_group","condition_fields","querySelectorAll","fields","classList","contains","forEach","condition_field","push","temp","temp2","temp3","dataset","field_data","parseInt","scraper_callback","scrape_condition_field_data","post_id","woocommerce_admin_meta_boxes","save_cart_conditions","post_status","form_data","objects","min","prevGroupType","Number","isInteger","validate_form_data","cart_conditions_invalid","addClass","notice_settings","message","btn_text","btn_url","auto_apply_display","is","test","cart_notice_url_invalid","ajax_save","cart_conditions","response","status","click","error_msg","save_on_coupon_publish","e","preventDefault","setTimeout","submit","callback","action","coupon_id","post","ajaxurl","product_table_buttons","bogo_form_fields","trigger_add_table_row_form","$table","$tbody","exclude","get_add_edit_form_row_markup","trigger_edit_table_row_form","$row","splice","product_id","replaceWith","add_edit_table_row","$search","$condition","$quantity","minimum","productId","toString","includes","product_exists_in_table","product_label","JSON","stringify","fill_form_propery_error_msg","cancel_add_edit_table_row","colspan","append_blank_placeholder_table_row","product_table_remove_product","no_products_added","prodOption","edit","type_to_search","btnText","restrict_number_min_value","attr","update_input_minimum_value","$select","$field","field_type","selector","update_has_ordered_before_condition_label","within_a_period_label","number_of_orders_label","$label","validate_price_field_value","input_price","minimum_price","condition_value_type_change","$type","$value","navigate_tabs","$tab","$module_block","tab","set_active_tab","init_cart_conditions","row","load_condition_group_fields","html","then","addLogic","field_markup","upsell_template","bogo_deals_type","combination_products_template","is_deals","products","discount_type","discount_value","bogo_instructions","productsLabel","priceDiscountLabel","priceType","priceCol","currency_symbol","discount_field_options","override","percent","fixed","get_price_column","priceTh","p","apply_default","multiple_items","trigger_default","category_first_column_template","category_id","category_label","placeholder_table_row_template","no_categories_added","product_first_column_template","any_products_template","isDeals","discountTypeLabel","anyproducts_apply","apply_template","anyproducts_trigger","trigger_quantity","trigger_template","toggle_block_data_type","block_type","condition_block","deals_block","bogo_deals","conditions","deals","block_data_type","conditions_type","deals_type","block_data","tempBlock","isDeal","isPremium","data_type","add_prod_cat_label","categoryLabel","instructions","tbody","product_cat","product_categories_template","add_product_label","productLabel","product","specific_products_template","$multipleDesc","save_bogo_deals","condition_rows","deal_rows","type_field","$notice_options","get_data","isTriggerError","isApplyError","bogo_deals_save_error_msg","discount_type_value_error_msg","button_text","button_url","notice_type","dataToSave","rows","clear_bogo_deals","confirm","_wpnonce","update_combined_products_list","$temp","current_data","$options","$discount_type","$discount_value","discount_val","isNaN","update_any_products_trigger_data","$block","update_any_products_apply_data","discountType","discountValue","add_edit_row_template","option","get_option","table_row_template","get_first_column_markup","object_id","object","get_table_row_data","$object_row","toggleBogoInterface","$discountType","$general","$inputs","trigger_toggle","restrict_quantity_value","bogo_toggle_editing_mode","toggle_disable_enable_fields","$fields","exludeCouponShown","upsell_advance_usage_limits","usage_limits","upsell_exclude_coupons_restriction","usage_restriction","afterClose","upsell_auto_apply","auto_apply","cart_condition_select_notice","$moduleBlock","$formBlock","premiumConditions","$noticeHolder","$noticeBlock","inArray","hideGeneralUpsellOnBogo","linksListTemplate","args","search","className","links","help_modal","l","freeOnly","link","url","premiumUrl","generateLink","modalTemplate","labels","images_url","is_premium","target","content","videos","kbs","tutorials","kbSearchArgs","search_placeholder","upgrade_to_premium","loading_videos","rel_links","kb_articles","tut_guides","permissionRequestTemplate","module","placeholderTemplate","loading_content","noVideoTemplate","videoEmbed","thumbnail","no_video","videoEmbedsState","videoModuleState","loadVideosOembed","_secure_nonce","urls","v","width","_nonce","videoEmbeds","ve","findIndex","updateVideoGalleryContent","$placeholder","embed","i","videoid","videoGalleryTemplate","switchActiveVideo","$this","$li","$wrap","$video","$thumbs","videoId","dataCache","showHelpModal","allow_fetch","open","showCloseButton","buttons","fetchContentDataUpdateModal","replaceModalContent","markupTemplate","cachedData","getCachedData","loadVideoGalleryContentCache","left","fail","responseJSON","searchTimeoutState","searchResultsCache","triggerSearchEvent","$results","clearTimeout","height","beforeCB","successCB","results","doSearchQuery","list","generateUrl","searchResultsTemplate","search_no_results","clearSearchEvent","allowFetchPermission","$div","closePermisionModal","closeAll","modules","ready","helpLinkDivs","help_text","on","each","div"],"sourceRoot":""}