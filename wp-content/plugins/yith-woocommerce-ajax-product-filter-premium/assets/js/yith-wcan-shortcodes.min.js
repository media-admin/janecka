(()=>{"use strict";var e=jQuery,t=e("body");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var r=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),a(this,"xhr",null),a(this,"doingAjax",!1),a(this,"originalSearch",location.search),a(this,"initialized",!1),a(this,"filtered",!1),this.initPopState(),this.initialized=!0}var l,o,s;return l=r,o=[{key:"initPopState",value:function(){this.pushUrlToHistory(window.location),e(window).on("popstate",(function(){var e;null!==(e=window.history.state)&&void 0!==e&&e._yithWcan&&window.location.reload(!0)}))}},{key:"doFilter",value:function(t,i,n){var a,r,l=this,o=e(i||"body");return(r=e(document).triggerHandler("yith_wcan_filters_parameters",[t]))&&(t=r),o&&this.block(o),a=this.buildUrl(t),yith_wcan_shortcodes.ajax_filters?(this.doingAjax=!0,this._doAjax(a).done((function(e){a=l.searchAlternativeUrl(e,a),l._beforeFilter(e,t),l.refreshFragments(i,n,e),l.pushUrlToHistory(a,e.pageTitle,t),l.originalSearch=location.search,o&&l.unblock(o),l._afterFilter(e,t),l.doingAjax=!1}))):(this.pushUrlToHistory(a,document.title,t),void(window.location=a))}},{key:"_beforeFilter",value:function(t,i){e(document).trigger("yith-wcan-ajax-loading",[t,i])}},{key:"_afterFilter",value:function(i,n){e(".woocommerce-ordering").on("change","select.orderby",(function(){e(this).closest("form").submit()})),this.filtered=n&&!!Object.keys(n).length,this.filtered?t.addClass("filtered"):t.removeClass("filtered"),e(window).trigger("scroll"),e(document).trigger("yith-wcan-ajax-filtered",[i,n]).trigger("yith_wcwl_reload_fragments")}},{key:"buildUrl",value:function(t){var n,a=this,r=yith_wcan_shortcodes.query_param,l={},o=window.location,s=yith_wcan_shortcodes.base_url?yith_wcan_shortcodes.base_url:(null==o?void 0:o.origin)+(null==o?void 0:o.pathname),c=this,h="object"===i(t)&&Object.keys(t).length;if(yith_wcan_shortcodes.session_param&&(s=s.replace(new RegExp("/"+yith_wcan_shortcodes.session_param+"/[^/]*/"),"")),h&&(l[r]=1),this.originalSearch){var u=this.originalSearch.replace("?","").split("&").reduce((function(e,t){var i=t.split("=");if(2===i.length){if(a.isFilterParam(i[0]))return e;e[i[0]]=i[1]}return e}),{});l=e.extend(l,u)}return h&&(l=e.extend(l,t)),(n=Object.keys(l).reduce((function(e,t){var i=l[t];return i&&t?e+=c._cleanParam(t)+"="+c._cleanParam(i)+"&":e}),"?").replace(/&$/g,"").replace(/%2B/g,"+").replace(/%2C/g,",")).length>1&&(s+=n),s}},{key:"searchAlternativeUrl",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=i;return-1===e.indexOf("yith_wcan:sharing_url")?n:n=(t=e.match(/<meta name="yith_wcan:sharing_url" content="([^"]*)">/))&&1 in t?t[1]:n}},{key:"pushUrlToHistory",value:function(e,t,i){yith_wcan_shortcodes.change_browser_url&&!navigator.userAgent.match(/msie/i)&&window.history.pushState({_yithWcan:!0,pageTitle:t,filters:i},"",e)}},{key:"refreshFragments",value:function(t,i,n){var a=document.createElement("html"),r=e(a);if(a.innerHTML=n,t){var l,o=e(i),s=e(t);o.length&&(l=r.find(i)).length&&o.replaceWith(l.first()),s.length&&(l=r.find(t)).length&&s.replaceWith(l.first())}else{var c=e(yith_wcan_shortcodes.content);c.length?c.replaceWith(r.find(yith_wcan_shortcodes.content)):e("body").replaceWith(r.find("body"))}e(document).trigger("yith_wcan_init_shortcodes")}},{key:"_cleanParam",value:function(e){var t,i;return null===(t=yith_wcan_shortcodes)||void 0===t||!t.process_sanitize||null!==(i=yith_wcan_shortcodes)&&void 0!==i&&i.skip_sanitize?e:encodeURIComponent(e)}},{key:"_doAjax",value:function(t,i){return this.xhr&&this.xhr.abort(),i=e.extend({url:t,headers:{"X-YITH-WCAN":1}},i),this.xhr=e.ajax(i),this.xhr}},{key:"block",value:function(t){var i;if(void 0!==e.fn.block){var n="#fff center center no-repeat";null!==(i=yith_wcan_shortcodes)&&void 0!==i&&i.loader&&(n="url('".concat(yith_wcan_shortcodes.loader,"') ").concat(n)),t.block({message:null,overlayCSS:{background:n,opacity:.7}})}}},{key:"unblock",value:function(t){void 0!==e.fn.unblock&&t.unblock()}},{key:"isFilterParam",value:function(t){var i,n=["rating_filter","min_price","max_price","price_ranges","onsale_filter","instock_filter","featured_filter","orderby","product-page",yith_wcan_shortcodes.query_param];return(i=e(document).triggerHandler("yith_wcan_supported_filters_parameters",[n]))&&(n=i),-1!==(n=n.concat(yith_wcan_shortcodes.supported_taxonomies.map((function(e){return e.replace("pa_","filter_")})))).indexOf(t)||-1!==t.indexOf("filter_")||-1!==t.indexOf("query_type_")}}],o&&n(l.prototype,o),s&&n(l,s),r}();function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"$label_set",null),o(this,"$labels",!1),this.$label_set=e,this._initLabels(),this.$label_set.data("filter_labels",this).addClass("enhanced")}var i,n,a;return i=t,(n=[{key:"_initLabels",value:function(){var t=this;this.getLabels().each((function(){var i=e(this);t._initLabel(i)}))}},{key:"_initLabel",value:function(e){var t=this;e.on("click",(function(i){t.disableLabel(e)&&i.preventDefault()}))}},{key:"getLabels",value:function(){return!1===this.$labels&&(this.$labels=this.$label_set.find(".active-filter-label")),this.$labels}},{key:"disableLabel",value:function(t){var i=t.data("filters"),n=!1;return e(".yith-wcan-filters").each((function(){var t=e(this).data("preset");n=n||t.deactivateFilterByProperties(i,!0)})),n}}])&&l(i.prototype,n),a&&l(i,a),t}();var c=function t(i){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=null,(a="$reset")in(n=this)?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,this.$reset=i,this.$reset.on("click",(function(t){t.preventDefault(),e(".yith-wcan-filters").each((function(){var t=e(this).data("preset");t.deactivateAllFilters(!0),t.closeModal()}))})),this.$reset.data("reset",this).addClass("enhanced")};function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"$button",null),u(this,"preset",null),u(this,"$preset",null),u(this,"isMobile",!1),this.$button=e,this._initPreset(),this._initResponsive(),this._initActions(),this.$button.data("modalOpener",this).addClass("enhanced")}var i,n,a;return i=t,(n=[{key:"_initPreset",value:function(){var t,i=this.$button.data("target");(t=e(i?"#".concat(i):".yith-wcan-filters")).length&&(this.$preset=t.first(),this.preset=this.$preset.data("preset"))}},{key:"_initResponsive",value:function(){var t=this;if(yith_wcan_shortcodes.modal_on_mobile&&this.preset){var i=window.matchMedia("(max-width: ".concat(yith_wcan_shortcodes.mobile_media_query,"px)"));e(window).on("resize",(function(){var e=!!i.matches;e!==t.isMobile&&(t.isMobile=e,t._afterLayoutChange())})).resize()}else this.$button.hide()}},{key:"_initActions",value:function(){var e;if(null!==(e=this.$preset)&&void 0!==e&&e.length){var t=this;this.$button.on("click",(function(e){e.preventDefault(),t.preset.openModal()}))}}},{key:"_afterLayoutChange",value:function(){this.isMobile?this.$button.show():this.$button.hide()}}])&&h(i.prototype,n),a&&h(i,a),t}();function d(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){o=!0,r=e},f:function(){try{l||null==i.return||i.return()}finally{if(o)throw r}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var _=function(){function t(i,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"$originalSelect",null),y(this,"$_main",null),y(this,"$_label",null),y(this,"$_dropdown",null),y(this,"$_search",null),y(this,"$_showMore",null),y(this,"$_items",null),y(this,"currentPage",1),y(this,"options",{}),this.$originalSelect=i,this.$originalSelect.is("select")){var a=this.$originalSelect.data("per_page"),r=this.$originalSelect.data("order"),l=this.$originalSelect.data("all-label"),o={showSearch:this.$originalSelect.data("show_search"),paginate:this.$originalSelect.data("paginate"),perPage:a||10,order:r||"ASC",getElements:null,labels:{emptyLabel:l||yith_wcan_shortcodes.labels.empty_option,searchPlaceholder:yith_wcan_shortcodes.labels.search_placeholder,noItemsFound:yith_wcan_shortcodes.labels.no_items,showMore:yith_wcan_shortcodes.labels.show_more}};this.options=e.extend(o,n),this._hideSelect(),this._initTemplate(),this._initActions(),this.$originalSelect.data("dropdown",this).addClass("enhanced")}}var i,n,a;return i=t,(n=[{key:"_hideSelect",value:function(){this.$originalSelect.hide()}},{key:"_initTemplate",value:function(){var t=e("<div/>",{class:"yith-wcan-dropdown closed"}),i=e("<div/>",{class:"dropdown-label",html:this.getLabel()}),n=e("<div>",{class:"dropdown-wrapper"}),a=e("<ul/>",{class:"matching-items filter-items"});n.append(a),t.append(i).append(n),this.options.showSearch&&this._initSearchTemplate(n),this.options.paginate&&this._initShowMoreTemplate(n),this.$originalSelect.after(t),this.$_main=t,this.$_label=i,this.$_dropdown=n,this.$_items=a}},{key:"_initSearchTemplate",value:function(t){var i=e("<div/>",{class:"search-field-container"}),n=e("<input/>",{name:"s",class:"search-field",type:"search",placeholder:this.options.labels.searchPlaceholder});i.append(n).prependTo(t),this.$_search=n}},{key:"_initShowMoreTemplate",value:function(t){var i=e("<a/>",{class:"show-more",text:this.options.labels.showMore.replace("%d",this.options.perPage)});i.on("click",this.loadNextPage.bind(this)).hide(),t.append(i),this.$_showMore=i}},{key:"_initActions",value:function(){var t,i,n=this;null===(t=this.$_main)||void 0===t||t.on("click",(function(e){e.stopPropagation(),n.toggleDropdown()})),this.$_dropdown.on("click",(function(e){e.stopPropagation()})),null===(i=this.$_search)||void 0===i||i.on("keyup search",(function(){n._populateItems()})),this.$_items.on("change",":input",(function(){var t,i=e(this).closest("li"),a=i.data("value");if(i.hasClass("disabled")&&!n.isValueSelected(a))return!1;i.toggleClass("active"),t=i.hasClass("active"),n._changeItemStatus(a,t)})),this.$_items.on("click","li:not(.checkbox) a",(function(t){var i,a=e(this).closest("li"),r=a.data("value");if(t.preventDefault(),a.hasClass("disabled")&&!n.isValueSelected(r))return!1;a.toggleClass("active"),(i=a.hasClass("active"))&&a.siblings().removeClass("active"),n._changeItemStatus(r,i)})),this.$_items.on("click","label > a",(function(t){var i=e(this).parent().find(":input");t.preventDefault(),(i.is('[type="radio"]')||i.is('[type="checkbox"]'))&&i.prop("checked",!i.prop("checked")),i.change()})),this.$originalSelect.on("change",(function(t,i){i||(n.$_items.find("li").each((function(){var t=e(this).data("value");n.isValueSelected(t)?n._selectItem(t):n._deselectItem(t)})),n.updateLabel())})),null!==globalThis&&void 0!==globalThis&&globalThis.yith_wcan_dropdown_init||(e(document).on("click",this._closeAllDropdowns),globalThis.yith_wcan_dropdown_init=!0)}},{key:"openDropdown",value:function(){var e;null===(e=this.$_main)||void 0===e||e.addClass("open").removeClass("closed"),this._afterDropdownOpen()}},{key:"closeDropdown",value:function(){var e;null===(e=this.$_main)||void 0===e||e.removeClass("open").addClass("closed")}},{key:"_closeAllDropdowns",value:function(){e(document).find("select.enhanced").filter((function(t,i){return!!e(i).data("dropdown")})).each((function(){e(this).data("dropdown").closeDropdown()}))}},{key:"_closeOtherDropdowns",value:function(){var t=this;e(document).find("select.enhanced").filter((function(i,n){var a=e(n);return!!a.data("dropdown")&&!a.is(t.$originalSelect)})).each((function(){e(this).data("dropdown").closeDropdown()}))}},{key:"toggleDropdown",value:function(){var e,t;null===(e=this.$_main)||void 0===e||e.toggleClass("open").toggleClass("closed"),null!==(t=this.$_main)&&void 0!==t&&t.hasClass("open")&&this._afterDropdownOpen()}},{key:"_afterDropdownOpen",value:function(){var e;this._closeOtherDropdowns(),null!==(e=this.$_search)&&void 0!==e&&e.length&&this.$_search.val(""),this._populateItems()}},{key:"getMatchingElements",value:function(t,i){var n=this,a=[],r=this.getOptions();return new Promise((function(l){r.each((function(){var i=e(this),n=i.val(),r=i.html(),l=new RegExp(".*"+t+".*","i");(!t||l.test(n)||l.test(r))&&a.push({value:n,label:r})})),n.options.getElements?n.options.getElements(t).then((function(t){t&&(t=t.reduce((function(e,t,i){return e.push({label:i,value:t}),e}),[]),a=e.extend(a,t)),l(n._formatItems(a,i))})):l(n._formatItems(a,i))}))}},{key:"_formatItems",value:function(e,t){var i=this,n=[],a=!1;return e.filter((function(e){return-1===n.indexOf(e.value)&&(n.push(e.value),!0)})).sort((function(e,t){var n="ASC"===i.options.order?1:-1;return e.value<t.value?-1*n:e.value>t.value?n:0})),t&&(a=t<Object.keys(e).length,e=e.slice(0,t)),{items:e,hasMore:a}}},{key:"_generateItem",value:function(t,i){var n,a=this.isValueSelected(t),r=this.getOptionByValue(t),l=e("<li/>",{"data-value":t,class:r.length?r.attr("class"):""});if(r.length){var o=r.data("template"),s=r.data("count");i=o||i,s&&(i+=s)}if(n=e("<a/>",{href:r.length?r.data("filter_url"):"#",html:i,"data-title":r.length?r.data("title"):""}),this.$originalSelect.prop("multiple")){var c=e("<input/>",{type:"checkbox",value:t}),h=e("<label>");c.prop("checked",a),h.prepend(c).append(n),l.append(h).addClass("checkbox")}else l.append(n);return a?l.addClass("active"):l.removeClass("active"),l}},{key:"_populateItems",value:function(t){var i,n,a=this,r=null!==(i=this.$_search)&&void 0!==i&&i.length?this.$_search.val():"",l=this.options.paginate?this.options.perPage:0;n=(t=t?parseInt(t):1)*l,this.getMatchingElements(r,n).then((function(i){var n=i.items,r=[],l=!1;if(a._emptyItems(),a._hideLoadMore(),n.length){var o,s=d(n);try{for(s.s();!(o=s.n()).done;){var c=o.value;""===c.value?r.unshift(a._generateItem(c.value,c.label)):r.push(a._generateItem(c.value,c.label))}}catch(e){s.e(e)}finally{s.f()}a.currentPage=t,l=i.hasMore}else r.push(e("<li/>",{text:a.options.labels.noItemsFound})),a.currentPage=1;a.$_items.append(r),a.$originalSelect.trigger("yith_wcan_dropdown_updated"),l&&a._showLoadMore()}))}},{key:"loadNextPage",value:function(){var e=this.currentPage+1;this._populateItems(e)}},{key:"_selectItem",value:function(e){return this._changeItemStatus(e,!0)}},{key:"_deselectItem",value:function(e){return this._changeItemStatus(e,!1)}},{key:"_changeItemStatus",value:function(e,t){var i=this.$originalSelect.find('option[value="'.concat(e,'"]'));return!!i.length&&(i.prop("selected",t),this.closeDropdown(),this.updateLabel(),this.$originalSelect.trigger("change",[!0]),!0)}},{key:"_emptyItems",value:function(){this.$_items.html("")}},{key:"_showLoadMore",value:function(){this.$_showMore.show()}},{key:"_hideLoadMore",value:function(){this.$_showMore.hide()}},{key:"getLabel",value:function(){return this.hasSelectedValues()?this.getSelectedLabels().join(", "):this.options.labels.emptyLabel}},{key:"updateLabel",value:function(){var e,t=this.getLabel();null===(e=this.$_label)||void 0===e||e.html(t)}},{key:"getOptions",value:function(){return this.$originalSelect.find("option")}},{key:"hasSelectedValues",value:function(){return this.getSelectedOptions().length}},{key:"isValueSelected",value:function(e){return-1!==this.getSelectedValues().indexOf(e.toString())}},{key:"getSelectedOptions",value:function(){return this.$originalSelect.find("option").filter(":selected")}},{key:"getOptionByValue",value:function(e){return this.$originalSelect.find('option[value="'.concat(e,'"]'))}},{key:"getSelectedLabels",value:function(){var t=[];return this.getSelectedOptions().each((function(){var i=e(this),n=i.data("template");n=n||i.html().replace(/\([0-9]*\)/,""),t.push(n)})),t}},{key:"getSelectedValues",value:function(){var t=[];return this.getSelectedOptions().each((function(){t.push(e(this).val())})),t}},{key:"destroy",value:function(){}}])&&v(i.prototype,n),a&&v(i,a),t}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var w=function(){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,"preset",!1),b(this,"$preset",!1),b(this,"target",!1),b(this,"$target",!1),b(this,"$filters",!1),b(this,"$filterButtons",!1),b(this,"modalElements",{}),b(this,"activeFilters",!1),b(this,"isMobile",!1),b(this,"sliderTimeout",!1),b(this,"originalFilters",null),b(this,"dirty",!1),this.preset="#"+i.attr("id"),this.$preset=i,this.target=this.$preset.data("target"),this.$target=!!this.target&&e(this.target),this._regiterStatus(),this._initFilterButton(),this._initResponsive(),this._initFilters(),this._initActions(),this.$preset.data("preset",this).addClass("enhanced").trigger("yith_wcan_preset_initialized",[this])}var i,n,a;return i=t,(n=[{key:"_initFilters",value:function(){var t=this;this.getFilters().each((function(){var i=e(this);t._initFilter(i)})),this.maybeShowClearAllFilters()}},{key:"_initFilterButton",value:function(){var e=this;this.$filterButtons=this.$preset.find(".apply-filters"),this.$filterButtons.length&&this.$filterButtons.on("click",(function(t){t.preventDefault(),e.filter()})).hide()}},{key:"_initActions",value:function(){this.$preset.find("form").on("submit",(function(e){e.preventDefault()}))}},{key:"_initResponsive",value:function(){var t=this;if(yith_wcan_shortcodes.modal_on_mobile){var i=window.matchMedia("(max-width: ".concat(yith_wcan_shortcodes.mobile_media_query,"px)"));e(window).on("resize",(function(){var e=!!i.matches;e!==t.isMobile&&(t.isMobile=e,t._afterLayoutChange())})).resize()}}},{key:"_initFilter",value:function(t){var i,n=this,a=function(i){var a=e(this),r=a.closest(".yith-wcan-filter"),l=!!r.length&&"yes"===r.data("multiple"),o=a.closest(".filter-item"),s=o.length?r.find(".filter-item").not(o):[];if(o.is(".disabled")&&!o.is(".active"))return i.preventDefault(),!1;i.preventDefault(),s.length&&!l&&s.removeClass("active").children("label").find(":input").prop("checked",!1).parent(".checked").removeClass("checked"),o.length&&o.toggleClass("active"),n.activeFilters=!1,n.maybeFilter(t),n.maybeToggleClearAllFilters(),n.maybeToggleClearFilter(r)};t.find(".filter-item").not(".checkbox").not(".radio").on("click","a",(function(t){var i=e(this).closest(".filter-item");if(!e(null==t?void 0:t.delegateTarget).is(i))return!1;a.call(this,t)})),t.find(":input").on("change",(function(t){var i=e(this),n=i.closest(".filter-item");if(n.is(".disabled")&&!n.is(".active"))return i.prop("checked",!1),!1;a.call(this,t)})),t.find("label > a").on("click",(function(t){var i=e(this),n=i.closest(".filter-item");if(t.preventDefault(),n.is(".disabled")&&!n.is(".active"))return!1;var a=i.parent().find(":input");(a.is('[type="radio"]')||a.is('[type="checkbox"]'))&&a.prop("checked",!a.prop("checked")),a.change()})),this._initTooltip(t),this._initPriceSlider(t),this._initDropdown(t),this._initCollapsable(t),this.maybeShowClearFilter(t),null!==(i=this.$preset)&&void 0!==i&&i.hasClass("custom-style")&&(this._initCustomInput(t),t.on("yith_wcan_dropdown_updated",(function(){var t=e(this).closest(".yith-wcan-filter");n._initCustomInput(t)})))}},{key:"_initTooltip",value:function(t,i){t.find("[data-title]").each((function(){var t=e(this);!t.hasClass("tooltip-added")&&t.data("title")&&(t.on("mouseenter",(function(){var t,n=e(this),a=null,r=n.outerWidth(),l=0;if(!i||"top"!==i&&"right"!==i){var o=n.closest(".filter-item");i=o.hasClass("color")||o.hasClass("label")?"top":"right"}a=e("<span>",{class:"yith-wcan-tooltip",html:n.data("title")}),n.append(a),t=a.outerWidth()+6,a.outerWidth(t),l="top"===i?(r-t)/2:r+15,a.css({left:l.toFixed(0)+"px"}).fadeIn(200),n.addClass("with-tooltip")})).on("mouseleave",(function(){var t=e(this);t.find(".yith-wcan-tooltip").fadeOut(200,(function(){t.removeClass("with-tooltip").find(".yith-wcan-tooltip").remove()}))})),t.addClass("tooltip-added"))}))}},{key:"_initDropdown",value:function(t){var i=t.find("select.filter-dropdown");i.length&&(i.hasClass("select2-hidden-accessible")&&void 0!==e.fn.selectWoo&&i.selectWoo("destroy"),this._initDropdownObject(i,{paginate:!0,perPage:yith_wcan_shortcodes.terms_per_page}))}},{key:"_initDropdownObject",value:function(e,t){return new _(e,t)}},{key:"_initPriceSlider",value:function(e){var t=this;if(e.hasClass("filter-price-slider")){var i=this,n=e.find(".price-slider"),a=n.find(".price-slider-min"),r=n.find(".price-slider-max"),l=parseFloat(n.data("min")),o=parseFloat(n.data("max")),s=parseFloat(a.val()),c=parseFloat(r.val()),h=parseFloat(n.data("step")),u=function(){i.sliderTimeout&&clearTimeout(i.sliderTimeout),i.sliderTimeout=setTimeout((function(){i.maybeFilter(e)}),200)};e.find(".price-slider-ui").ionRangeSlider({skin:"round",type:"double",min:l,max:o,step:h,from:s,to:c,min_interval:h,values_separator:" - ",prettify:function(e){return t.formatPrice(e)},onChange:function(e){a.val(e.from),r.val(e.to)},onFinish:u}),a.add(r).off("change").on("keyup",(function(){a.val()&&r.val()&&u()}))}}},{key:"_initCollapsable",value:function(e){this._initTitleCollapsable(e),this._initHierarchyCollapsable(e)}},{key:"_initTitleCollapsable",value:function(e){var t=e.find(".collapsable");t.length&&this._initToggle(t,t,e.find(".filter-content"))}},{key:"_initHierarchyCollapsable",value:function(t){var i=t.find(".hierarchy-collapsable");if(i.length){var n=this,a=t.find(".active");a.length&&(a.parents(".hierarchy-collapsable").removeClass("closed").addClass("opened"),a.hasClass("hierarchy-collapsable")&&yith_wcan_shortcodes.show_current_children&&a.removeClass("closed").addClass("opened")),i.each((function(){var t=e(this),i=e("<span/>",{class:"toggle-handle"});i.appendTo(t),n._initToggle(i,t,t.children("ul.filter-items"))}))}}},{key:"_initToggle",value:function(e,t,i){t.hasClass("closed")&&i.hide(),e.off("click").on("click",(function(e){e.stopPropagation(),e.preventDefault(),i.slideToggle(400,(function(){t.toggleClass("opened").toggleClass("closed")}))}))}},{key:"_initCustomInput",value:function(t){t.find(":input").each((function(){var t,i=e(this),n=i.attr("type"),a="".concat(n,"button");"checkbox"!==n&&"radio"!==n||i.closest(".".concat(a)).length||(i.is(":checked")&&(a+=" checked"),t=e("<span/>",{class:a}),i.wrap(t).on("change",(function(){var t=e(this);t.prop("checked")?t.parent().addClass("checked"):t.parent().removeClass("checked")})))}))}},{key:"_regiterStatus",value:function(){this.originalFilters=this.getFiltersProperties()}},{key:"_afterLayoutChange",value:function(){var t,i;this.isMobile?(this.$preset.addClass("filters-modal").attr("role","dialog").attr("tabindex","-1").hide(),this._addCloseModalButton(),this._addApplyFiltersModalButton(),this._switchToCollapsables(),null===(t=this.$filterButtons)||void 0===t||t.hide()):(this.$preset.removeClass("filters-modal").removeClass("open").removeAttr("role").removeAttr("tabindex").show(),e("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open"),this._removeCloseModalButton(),this._removeApplyFiltersModalButton(),this._switchBackCollapsables(),null===(i=this.$filterButtons)||void 0===i||i.show())}},{key:"_addCloseModalButton",value:function(){var t=e("<a/>",{class:"close-button",html:"&times;","data-dismiss":"modal","aria-label":yith_wcan_shortcodes.labels.close});t.prependTo(this.$preset).on("click",this.closeModal.bind(this)),this.modalElements.closeButton=t}},{key:"_removeCloseModalButton",value:function(){var e,t;null===(e=this.modalElements)||void 0===e||null===(t=e.closeButton)||void 0===t||t.remove()}},{key:"_addApplyFiltersModalButton",value:function(){var t=this,i=e("<button/>",{class:"apply-filters main-modal-button",html:yith_wcan_shortcodes.labels.show_results,"data-dismiss":"modal"});i.appendTo(this.$preset).on("click",(function(){t.filter(),t.closeModal()})),this.modalElements.applyFiltersButton=i}},{key:"_removeApplyFiltersModalButton",value:function(){var e,t;null===(e=this.modalElements)||void 0===e||null===(t=e.applyFiltersButton)||void 0===t||t.remove()}},{key:"_switchToCollapsables",value:function(){var t=this;this.getFilters().each((function(){var i=e(this),n=i.find(".filter-title");n.length&&!n.hasClass("collapsable")&&(n.addClass("collapsable").data("disable-collapse",!0),t._initTitleCollapsable(i))}))}},{key:"_switchBackCollapsables",value:function(){this.getFilters().each((function(){var t=e(this),i=t.find(".filter-title");i.length&&i.hasClass("collapsable")&&i.data("disable-collapse")&&(i.removeClass("collapsable").removeData("disable-collapse",!0).off("click"),t.find(".filter-content").show())}))}},{key:"_openAllCollapsables",value:function(){var t=this;this.$filters.not(".no-title").not((function(i,n){return t.isFilterActive(e(n))})).find(".filter-content").show().end().find(".filter-title").removeClass("closed").addClass("opened")}},{key:"_closeAllCollapsables",value:function(){var t=this;this.$filters.not(".no-title").not((function(i,n){return t.isFilterActive(e(n))})).find(".filter-content").hide().end().find(".filter-title").addClass("closed").removeClass("opened")}},{key:"maybeRegisterStatusChange",value:function(){var e=this.getFiltersProperties(),t=JSON.stringify(e),i=JSON.stringify(this.originalFilters);this.dirty=t!==i}},{key:"maybeFilter",value:function(e){if(this.maybeRegisterStatusChange(),yith_wcan_shortcodes.instant_filters&&!this.isMobile)this.filter();else if(yith_wcan_shortcodes.instant_filters||this.isMobile){if(this.isMobile&&this.dirty){var t;this.$preset.addClass("with-filter-button"),null===(t=this.modalElements.applyFiltersButton)||void 0===t||t.show()}}else{var i,n;this.dirty?null===(i=this.$filterButtons)||void 0===i||i.show():null===(n=this.$filterButtons)||void 0===n||n.hide()}}},{key:"filter",value:function(){var t,i,n,a=this,r=null===(t=window)||void 0===t?void 0:t.product_filter;null==r||null===(i=r.doFilter(this.getFiltersProperties(),this.target,this.preset))||void 0===i||i.done((function(){var t=e(a.preset);if(!a.isMobile&&t.length&&yith_wcan_shortcodes.scroll_top){var i=t.offset().top;if(yith_wcan_shortcodes.scroll_target){var n=e(yith_wcan_shortcodes.scroll_target);i=n.length?n.offset().top:i}e("body, html").animate({scrollTop:i-100})}a.originalFilters=a.getFiltersProperties(),a.dirty=!1})),this.isMobile&&(this.$preset.removeClass("with-filter-button"),null===(n=this.modalElements.applyFiltersButton)||void 0===n||n.hide(),this.closeModal())}},{key:"getFilters",value:function(){return!1===this.$filters&&(this.$filters=this.$preset.find(".yith-wcan-filter")),this.$filters}},{key:"getActiveFilters",value:function(){return!1===this.activeFilters&&(this.activeFilters=this.getFiltersProperties()),this.activeFilters}},{key:"isAnyFilterActive",value:function(){return!!Object.keys(this.getActiveFilters()).length}},{key:"isFilterActive",value:function(e){var t,i;switch(e.data("filter-type")){case"tax":case"review":case"price_range":var n=e.find(".filter-dropdown");if(n.length){var a=n.val();t="object"===g(a)?!(null==a||!a.length):!!a;break}case"stock_sale":t=e.find(".filter-item").filter(".active").length;break;case"price_slider":var r=parseFloat(e.find(".price-slider").data("step")),l=parseFloat(e.find(".price-slider").data("min")),o=parseFloat(e.find(".price-slider").data("max")),s=parseFloat(e.find(".price-slider-min").val()),c=parseFloat(e.find(".price-slider-max").val());t=Math.abs(s-l)>=r||Math.abs(c-o)>=r;break;case"orderby":t="menu_order"!==e.find(".filter-order-by").val();break;default:t=!1}return t=void 0!==(i=e.triggerHandler("yith_wcan_is_filter_active",[t,this]))?i:t}},{key:"countActiveItems",value:function(e){var t;switch(e.data("filter-type")){case"tax":case"review":case"price_range":var i=e.find(".filter-dropdown");if(i.length){var n=i.val();t="object"===g(n)?null==n?void 0:n.length:+!!n;break}case"stock_sale":t=e.find(".filter-items").find(".active").length;break;case"orderby":this.isFilterActive(e)&&(t=1);break;default:t=0}return t}},{key:"getFilterProperties",value:function(t){var i,n,a=t.data("filter-type"),r="yes"===t.data("multiple"),l=t.find(".filter-dropdown"),o={};switch(a){case"tax":var s=[],c=t.data("taxonomy"),h=0===c.indexOf("filter"),u=t.data("relation");if(l.length?r?s=l.val():s.push(l.val()):s=(n=t.find(".filter-item").filter(".active").children("a, label")).get().reduce((function(t,i){var n;return(n=(i=e(i)).is("label")?i.find(":input").val():i.data("term-slug"))?(t.push(n),t):t}),s),r){var f=h||"and"!==u?",":"+";o[c]=s.join(f)}else o[c]=s.pop();h&&(o[c.replace("filter_","query_type_")]=u);break;case"review":l.length?o.rating_filter=l.val():(n=t.find(".filter-item").filter(".active").children("a, label"),r?o.rating_filter=n.get().reduce((function(t,i){var n;return(n=(i=e(i)).is("label")?i.find(":input").val():i.data("rating"))?(t.push(n),t):t}),[]).join(","):(n=n.first(),o.rating_filter=n.is("label")?n.find(":input").val():n.data("rating")));break;case"price_range":l.length?r?o.price_ranges=l.val().join(","):(o.min_price=l.val().split("-")[0],o.max_price=l.val().split("-")[1]):(n=t.find(".filter-item").filter(".active").children("a, label"),r?o.price_ranges=n.get().reduce((function(t,i){var n=e(i).data("range-min"),a=e(i).data("range-max");return t+=(a?"".concat(n,"-").concat(a):n)+","}),"").replace(/^(.*),$/,"$1"):(o.min_price=parseFloat(n.first().data("range-min")),o.max_price=parseFloat(n.first().data("range-max"))));break;case"price_slider":o.min_price=parseFloat(t.find(".price-slider-min").val()),o.max_price=parseFloat(t.find(".price-slider-max").val());break;case"stock_sale":t.find(".filter-on-sale").is(".active")&&(o.onsale_filter=1),t.find(".filter-in-stock").is(".active")&&(o.instock_filter=1),t.find(".filter-featured").is(".active")&&(o.featured_filter=1);break;case"orderby":o.orderby=t.find(".filter-order-by").val()}return o=void 0!==(i=t.triggerHandler("yith_wcan_filter_properties",[o,self]))?i:o}},{key:"getFiltersProperties",value:function(){var t={},i=this;return this.getFilters().each((function(){var n=e(this);if(i.isFilterActive(n)){var a=i.getFilterProperties(n);t=i.mergeProperties(t,a,n)}})),t}},{key:"getFiltersByProperties",value:function(t){var i=this;return this.getFilters().filter((function(){var n=e(this);if(i.isFilterActive(n)){var a=i.getFilterProperties(n),r=!1;for(var l in t){if(["min_price","max_price","price_ranges"].includes(l)&&(a.min_price||a.price_ranges)){r=!0;break}if(a[l]){r=!0;break}}return r}return!1}))}},{key:"maybeToggleClearFilter",value:function(e){this.isFilterActive(e)?this.maybeShowClearFilter(e):this.maybeHideClearFilter(e)}},{key:"maybeToggleClearAllFilters",value:function(){this.isAnyFilterActive()?this.maybeShowClearAllFilters():this.maybeHideClearAllFilters()}},{key:"maybeShowClearFilter",value:function(t){var i=this;this.isFilterActive(t)&&yith_wcan_shortcodes.show_clear_filter&&(t.find(".clear-selection").remove(),e("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_selection,role:"button"}).prependTo(t.find(".filter-content")).on("click",(function(e){e.preventDefault(),i.deactivateFilter(t,!1,yith_wcan_shortcodes.instant_filters),i.maybeHideClearFilter(t),yith_wcan_shortcodes.instant_filters&&i.closeModal()})))}},{key:"maybeShowClearAllFilters",value:function(){var t=this;this.isAnyFilterActive()&&this.isMobile&&(this.$preset.find(".clear-selection").remove(),e("<a/>",{class:"clear-selection",text:yith_wcan_shortcodes.labels.clear_all_selections,role:"button"}).prependTo(this.$preset.find(".filters-container")).on("click",(function(e){e.preventDefault(),t.deactivateAllFilters(yith_wcan_shortcodes.instant_filters),t.maybeHideClearAllFilters(),yith_wcan_shortcodes.instant_filters&&t.closeModal()})))}},{key:"maybeHideClearFilter",value:function(e){!this.isFilterActive(e)&&yith_wcan_shortcodes.show_clear_filter&&e.find(".clear-selection").remove()}},{key:"maybeHideClearAllFilters",value:function(){this.isAnyFilterActive()||this.$preset.find(".filters-container").children(".clear-selection").remove()}},{key:"deactivateFilter",value:function(t,i,n){var a=t.data("filter-type"),r=t.find(".filter-item"),l=r.filter(".active"),o=t.find(".filter-dropdown");switch(a){case"tax":var s=t.data("taxonomy");o.length?(i?o.find("option").each((function(){var t=e(this);t.val().toString()===i[s].toString()&&t.prop("selected",!1)})):o.find("option").prop("selected",!1),o.change()):i?l.each((function(){var t=e(this),n=t.children("label"),a=t.children("a");(n.length?n.find(":input").val():a.data("term-slug")).toString()===i[s].toString()&&(t.children("label").children("a").click(),t.removeClass("active"))})):(l.children("label").children("a").click(),l.removeClass("active"));break;case"review":o.length?(i?o.find("option").each((function(){var t=e(this);t.val()===i.rating_filter&&t.prop("selected",!1)})):o.find("option").prop("selected",!1),o.change()):i?l.each((function(){var t=e(this),n=t.children("label"),a=t.children("a");(n.length?n.find(":input").val():a.data("rating"))===i.rating_filter&&(t.children("label").children("a").click(),t.removeClass("active"))})):(l.children("label").children("a").click(),l.removeClass("active"));break;case"price_range":o.length?(i?o.find("option").each((function(){var t=e(this),n=i.min_price+(i.max_price?"-".concat(i.max_price):"");t.val()===n&&t.prop("selected",!1)})):o.find("option").prop("selected",!1),o.change()):i?l.each((function(){var t,n,a=e(this),r=a.children("label"),l=a.children("a");n=r.length?r.find(":input").val():l.data("min_price")+(l.data("max_price")?"-"+l.data("max_price"):""),i.min_price?t=i.min_price+(i.max_price?"-"+i.max_price:""):i.price_ranges&&(t=i.price_ranges),n===t&&(a.children("label").children("a").click(),a.removeClass("active"))})):(l.children("label").children("a").click(),l.removeClass("active"));break;case"price_slider":var c=t.find(".price-slider");t.find(".price-slider-min").val(c.data("min")),t.find(".price-slider-max").val(c.data("max")).change();break;case"orderby":t.find("select").val("menu_order");break;case"stock_sale":i?(null!=i&&i.instock_filter&&t.find(".filter-in-stock").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),null!=i&&i.onsale_filter&&t.find(".filter-on-sale").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active"),null!=i&&i.featured_filter&&t.find(".filter-featured").find(":input").prop("checked",!1).change().closest(".filter-item").removeClass("active")):(t.find(".filter-in-stock").find(":input").prop("checked",!1).change(),t.find(".filter-on-sale").find(":input").prop("checked",!1).change(),t.find(".filter-featured").find(":input").prop("checked",!1).change(),r.removeClass("active"));break;default:r.removeClass("active")}this.activeFilters=!1,n&&this.filter()}},{key:"deactivateAllFilters",value:function(t){var i=this;return this.getFilters().each((function(){var t=e(this);i.deactivateFilter(t)})),this.activeFilters=!1,t&&this.filter(),!0}},{key:"deactivateFilterByProperties",value:function(t,i){var n=this,a=this.getFiltersByProperties(t);return!!a.length&&(a.each((function(){var a=e(this);n.deactivateFilter(a,t,i)})),!0)}},{key:"openModal",value:function(){var t=this;this.isMobile&&(yith_wcan_shortcodes.toggles_open_on_modal?this._openAllCollapsables():this._closeAllCollapsables(),e("body").css("overflow","hidden").addClass("yith-wcan-preset-modal-open"),this.$preset.show(),setTimeout((function(){t.$preset.addClass("open")}),100))}},{key:"closeModal",value:function(){var t=this;this.isMobile&&(this.$preset.removeClass("open"),setTimeout((function(){t.$preset.hide(),e("body").css("overflow","auto").removeClass("yith-wcan-preset-modal-open")}),300))}},{key:"formatPrice",value:function(e){return"undefined"!=typeof accounting&&(e=accounting.formatMoney(e,{symbol:yith_wcan_shortcodes.currency_format.symbol,decimal:yith_wcan_shortcodes.currency_format.decimal,thousand:yith_wcan_shortcodes.currency_format.thousand,precision:0,format:yith_wcan_shortcodes.currency_format.format})),e}},{key:"mergeProperties",value:function(t,i,n){for(var a in i)if(i.hasOwnProperty(a)&&t[a]){switch(a){case"rating_filter":case"min_price":case"max_price":case"onsale_filter":case"instock_filter":case"orderby":t[a]=i[a];break;default:if(0===a.indexOf("query_type_"))t[a]=i[a];else{var r=0===a.indexOf("filter_"),l=r?",":"+",o=t[a].replace(",",l)+l+i[a].replace(",",l);if(o=o.split(l).filter((function(e,t,i){return i.indexOf(e)===t})).join(l),t[a]=o,r){var s=a.replace("filter_","query_type_");t[s]="and",i[s]="and"}}}delete i[a]}return e.extend(t,i),t}}])&&m(i.prototype,n),a&&m(i,a),t}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t,i){return $="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}},$(e,t,i||e)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=A(e);if(t){var a=A(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return x(this,i)}}function x(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var M=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(l,t);var i,n,a,r=T(l);function l(){var e;C(this,l);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return P(O(e=r.call.apply(r,[this].concat(i))),"$preset",!1),e}return i=l,(n=[{key:"getPreset",value:function(){return this.preset?this.preset:(this.$preset=this.$originalSelect.closest(".yith-wcan-filters"),!!this.$preset.length&&this.$preset)}},{key:"_initTemplate",value:function(){var t;if(null!==(t=this.getPreset())&&void 0!==t&&t.hasClass("horizontal")){var i=e("<div>",{class:"dropdown-wrapper"}),n=e("<ul/>",{class:"matching-items filter-items"});i.append(n),this.options.showSearch&&this._initSearchTemplate(i),this.options.paginate&&this._initShowMoreTemplate(i),this.$originalSelect.after(i),this.$_main=null,this.$_label=null,this.$_dropdown=i,this.$_items=n,this._populateItems()}else $(A(l.prototype),"_initTemplate",this).call(this)}}])&&F(i.prototype,n),a&&F(i,a),l}(_);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function H(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t,i){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}},z(e,t,i||e)}function B(e,t){return B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},B(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=E(e);if(t){var a=E(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return I(this,i)}}function I(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var L=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(l,t);var i,n,a,r=D(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=r.call(this,e)).isHorizontal()&&!globalThis.yith_wcan_backdrop_init&&(t._initBackdropClick(),globalThis.yith_wcan_backdrop_init=!0),t}return i=l,(n=[{key:"_initBackdropClick",value:function(){var t=this;this.isHorizontal()&&e(document).on("click",(function(){t.isMobile||t.maybeCloseAllHorizontalToggles()}))}},{key:"isHorizontal",value:function(){var e;return null===(e=this.$preset)||void 0===e?void 0:e.hasClass("horizontal")}},{key:"maybeFilter",value:function(e){var t=e.closest(".yith-wcan-filter");this.maybeRegisterStatusChange(),(!this.isHorizontal()||this.isMobile||!this.isHorizontalToggle(t.find(".filter-title"))||(this.maybeUpdateFiltersCount(t),e.hasClass("apply-filters")||e.hasClass("clear-selection")))&&z(E(l.prototype),"maybeFilter",this).call(this)}},{key:"maybeShowClearFilter",value:function(t){var i=this;if(this.isFilterActive(t)&&yith_wcan_shortcodes.show_clear_filter)if(!this.isHorizontal()||this.isMobile)z(E(l.prototype),"maybeShowClearFilter",this).call(this,t);else{t.find(".clear-selection").remove();var n=e("<a/>",{class:"clear-selection button",text:yith_wcan_shortcodes.labels.clear_selection,role:"button"});n.prependTo(t.find(".filter-content-footer")).on("click",(function(e){e.preventDefault(),i.deactivateFilter(t,!1,yith_wcan_shortcodes.instant_filters),i.maybeUpdateFiltersCount(t),i.maybeHideClearFilter(t),i.maybeFilter(n),i.maybeCloseHorizontalToggle(t.find(".filter-title.collapsable"))}))}}},{key:"_initFilter",value:function(e){z(E(l.prototype),"_initFilter",this).call(this,e),this.maybeUpdateFiltersCount(e)}},{key:"_initTooltip",value:function(e,t){this.isHorizontal()||z(E(l.prototype),"_initTooltip",this).call(this,e,t)}},{key:"_afterLayoutChange",value:function(){z(E(l.prototype),"_afterLayoutChange",this).call(this),this.isMobile?this._removeAllHorizontalTogglesFooter():this._addAllHorizontalTogglesFooter()}},{key:"_initDropdownObject",value:function(e,t){return new M(e,t)}},{key:"_initToggle",value:function(e,t,i){var n=this,a=this.isHorizontal();t.hasClass("closed")&&i.hide(),a&&this._addHorizontalToggleFooter(e),e.off("click").on("click",(function(r){r.stopPropagation(),a&&!n.isMobile&&e.hasClass("filter-title")?(n.maybeCloseAllHorizontalToggles(i),i.toggle(0,(function(){t.toggleClass("opened").toggleClass("closed")}))):i.slideToggle(400,(function(){t.toggleClass("opened").toggleClass("closed")}))})),a&&i.on("click",(function(e){e.stopPropagation()}))}},{key:"isHorizontalToggle",value:function(e){return!!this.isHorizontal()&&e.is(".collapsable")}},{key:"maybeCloseHorizontalToggle",value:function(e){var t=e.next(".filter-content");t.length&&this.isHorizontal()&&!this.isMobile&&e.hasClass("filter-title")&&this.isHorizontalToggle(e)&&(t.hide(),e.toggleClass("opened").toggleClass("closed"))}},{key:"maybeCloseAllHorizontalToggles",value:function(t){e(".yith-wcan-filters.enhanced").find(".filter-title.collapsable").next(".filter-content").not(t).hide().prev(".filter-title").removeClass("opened").addClass("closed")}},{key:"_addHorizontalToggleFooter",value:function(t){var i=this,n=t.next(".filter-content");if(n.length&&this.isHorizontal()&&!this.isMobile&&t.hasClass("filter-title")&&this.isHorizontalToggle(t)){t.closest(".yith-wcan-filter");var a=e("<div/>",{class:"filter-content-footer"}),r=e("<a/>",{class:"apply-filters button alt",text:yith_wcan_shortcodes.labels.save});r.on("click",(function(){i.maybeFilter(r),i.maybeCloseAllHorizontalToggles(t)})),a.append(r).appendTo(n)}}},{key:"_addAllHorizontalTogglesFooter",value:function(){var t=this;this.getFilters().each((function(){var i=e(this).find(".filter-title.collapsable");i.length&&t._addHorizontalToggleFooter(i)}))}},{key:"_removeHorizontalToggleFooter",value:function(e){var t=e.next(".filter-content");t.length&&t.find(".filter-content-footer").remove()}},{key:"_removeAllHorizontalTogglesFooter",value:function(){var t=this;this.getFilters().each((function(){var i=e(this).find(".filter-title.collapsable");i.length&&t._removeHorizontalToggleFooter(i)}))}},{key:"maybeUpdateFiltersCount",value:function(t){var i=t.find(".filter-title.collapsable");if(i.find(".filter-count").remove(),i.length&&this.isHorizontalToggle(i)&&this.isFilterActive(t)){var n=this.countActiveItems(t);if(n){var a=e("<span/>",{class:"filter-count",text:n});i.append(a)}}}}])&&H(i.prototype,n),a&&H(i,a),l}(w);jQuery((function(e){e(document).on("yith_wcan_init_shortcodes yith_plugin_fw_gutenberg_success_do_shortcode",(function(){e(".yith-wcan-filters").not(".enhanced").each((function(){new L(e(this))})),e(".yith-wcan-active-filters").not(".enhanced").each((function(){new s(e(this))})),e(".yith-wcan-reset-filters").not(".enhanced").each((function(){new c(e(this))})),e(".yith-wcan-filters-opener").not(".enhanced").each((function(){new f(e(this))}))})).trigger("yith_wcan_init_shortcodes"),globalThis.product_filter=new r}))})();